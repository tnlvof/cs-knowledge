# PRD: 메AI플스토리 - IT 서비스 운영 CS 지식 퀴즈 RPG

> Version: 1.5
> Last Updated: 2026-02-13
> Status: Draft

---

## 변경 이력

| 버전 | 날짜 | 변경 내용 |
|------|------|----------|
| 1.0 | 2026-02-13 | 초안 작성 (핵심 기능, DB, API, UI/UX, MVP 범위) |
| 1.1 | 2026-02-13 | 프로젝트명 "메AI플스토리"로 확정, Gemini 3 Flash Preview 반영, Next.js 16 |
| 1.2 | 2026-02-13 | UI/UX 메이플스토리 레퍼런스 전면 개편 (픽셀아트, 밝은 톤, 저작권 회피 가이드) |
| 1.3 | 2026-02-13 | 후원 시스템 (토스페이먼츠 + 젬) 및 아이템샵 (코스튬 꾸미기) 추가 |
| 1.4 | 2026-02-13 | 캐릭터 자랑하기 (카드 이미지 + 공개 프로필 + Web Share API) 추가 |
| 1.4.1 | 2026-02-13 | 랭킹 시스템 (종합/주간/분야별/콤보/명예의전당 + 시즌제) 추가 |
| 1.5 | 2026-02-13 | 문제별 정답률, 예상 연봉 (공공데이터 기반), 오답 EXP 감소 + 레벨 다운 시스템 추가 |
| 1.5.1 | 2026-02-13 | 패키지 매니저 Bun 지정 |
| 1.5.2 | 2026-02-13 | specs/002 스펙파일 생성 (랭킹, 예상연봉, 레벨다운, 정답률, Bun 전환) |

---

## 1. 프로젝트 개요

### 1.1 배경

AI 시대에 바이브코딩으로 프로젝트를 빠르게 만들 수 있지만, 실제 서비스 운영에는 여전히 탄탄한 CS 지식이 필수다. 단순 암기가 아닌, 게이미피케이션을 통해 자연스럽게 CS 지식을 체화할 수 있는 퀴즈 RPG 서비스를 만든다.

### 1.2 핵심 가치

- **게임처럼 공부한다**: RPG 세계관 + 캐릭터 성장 시스템으로 학습 동기 극대화
- **주관식으로 진짜 실력**: 객관식이 아닌 주관식 답변 → AI 채점으로 진짜 이해도 측정
- **레벨 1~100**: 입문부터 CTO급까지, 체계적인 성장 경로 제공

### 1.3 타겟 사용자

- 바이브코딩으로 프로젝트는 만들 수 있지만 CS 기초가 부족한 개발자
- IT 서비스 운영 역량을 키우고 싶은 주니어~미드 레벨 개발자
- 기술 면접을 준비하는 취업/이직 준비생

---

## 2. 기술 스택

| 영역 | 기술 | 비고 |
|------|------|------|
| 프레임워크 | **Next.js 16** (App Router) | 풀스택, 최신 버전 |
| 언어 | **TypeScript** | 타입 안전성 |
| 스타일링 | **Tailwind CSS 4** + **Framer Motion** | 모바일 UI + 게임 애니메이션 |
| 데이터베이스 | **Supabase** (PostgreSQL) | Auth + DB + Storage |
| 인증 | **Supabase Auth** (Google OAuth) | Auth Proxy 최신 기능 활용 |
| AI 채점 | **Gemini 3 Flash Preview** | 주관식 답변 채점 + 피드백 |
| 패키지 매니저 | **Bun** | 빠른 설치/실행 속도 |
| 배포 | **Vercel** | Next.js 최적화 배포 |
| 결제 | **토스페이먼츠** | API 비용 후원 결제 |
| 이미지 저장 | **Supabase Storage** | 몬스터/캐릭터 이미지 |

---

## 3. 핵심 기능

### 3.1 사용자 플로우 (전체)

```
첫 접속 → 캐릭터 생성 → 퀴즈(전투) → 레벨업 → 자동전직 → 반복
                ↓                                    ↑
          (로그인 없이 시작)                    (로그인 유도 → 데이터 저장)
```

### 3.2 캐릭터 시스템

#### 3.2.1 캐릭터 생성 (첫 접속)

- 첫 접속 시 **로그인 없이** 바로 캐릭터 생성 화면 진입
- 닉네임 입력 + 초기 캐릭터 외형 선택 (3~4종)
- 캐릭터 생성 완료 후 바로 첫 번째 퀴즈(전투) 시작
- 데이터는 localStorage에 임시 저장 → 로그인 시 서버 동기화

#### 3.2.2 직업 시스템 (자동전직)

CS 분야별 특화 직업으로 자동전직. 가장 많이 정답을 맞춘 분야 기준.

| 직업 | 특화 분야 | 전직 조건 | 아이콘 컨셉 |
|------|----------|----------|------------|
| 🗡️ 네트워크 기사 | 네트워크 | 네트워크 정답률 1위 | 검 + 네트워크 케이블 |
| 🛡️ 리눅스 수호자 | Linux/OS | Linux/OS 정답률 1위 | 방패 + 터미널 |
| 📖 데이터 마법사 | 데이터베이스 | DB 정답률 1위 | 지팡이 + 데이터 스크롤 |
| ⚔️ 배포 전사 | 배포/CI·CD | 배포 정답률 1위 | 쌍검 + 파이프라인 |
| 🔮 관측의 현자 | 모니터링 | 모니터링 정답률 1위 | 수정구슬 + 대시보드 |
| 🏹 보안 레인저 | 보안 | 보안 정답률 1위 | 활 + 방화벽 |
| 🧙 아키텍트 대마법사 | 아키텍처 | 아키텍처 정답률 1위 | 로브 + 설계도 |
| ⚡ 장애 사냥꾼 | 장애/SRE | SRE 정답률 1위 | 번개 + 알람 |

- 전직은 **레벨 10, 30, 50, 70, 90**에서 발생 (전직 연출 포함)
- 상위 전직은 같은 분야 내에서 더 강한 직업으로 진화
- 전직 시 화려한 애니메이션 연출

#### 3.2.3 레벨 시스템 (1~100)

| 레벨 구간 | 단계 | 퀴즈 난이도 | 몬스터 등급 |
|----------|------|-----------|-----------|
| 1~10 | 수습 모험가 | 입문 (Level 1) | 슬라임급 |
| 11~25 | 견습 기사 | 초급 (Level 1~2) | 고블린급 |
| 26~50 | 정식 모험가 | 중급 (Level 2~3) | 오크/늑대급 |
| 51~75 | 베테랑 | 고급 (Level 3) | 드래곤급 |
| 76~90 | 마스터 | 심화 (Level 3~4) | 마왕급 |
| 91~100 | 전설 | 최고급 (Level 4) | 신급 |

**경험치(EXP) 시스템:**
- 정답: +100 EXP (기본)
- 부분 정답: +30~70 EXP (AI 채점 점수 비례)
- **오답: -50 EXP** (경험치 감소! **레벨 다운 있음**)
- 연속 정답 보너스: 연속 3문제 정답 시 1.5배, 5문제 시 2배, 10문제 시 3배
- **연속 오답 페널티**: 연속 3문제 오답 시 -30 EXP 추가 감소 (총 -80)
- 레벨업에 필요한 EXP는 레벨이 올라갈수록 점진적 증가
- **레벨 다운 시스템**: EXP가 0 이하로 내려가면 레벨 -1 (이전 레벨 EXP 상한에서 이어서 차감)
  - Lv.1 이하로는 내려가지 않음 (최저 Lv.1, EXP 0)
  - 레벨 다운 시 "LEVEL DOWN..." 연출 (화면 어두워짐 + 캐릭터 풀죽는 모션)
  - 전직 해제: 전직 기준 레벨(10, 30, 50, 70, 90) 아래로 떨어지면 이전 직업으로 강등
- **고레벨 난이도 곡선**: 레벨이 높을수록 올리기 어렵고 떨어지기 쉬움

| 레벨 구간 | 레벨업 필요 EXP | 오답 페널티 | 체감 난이도 |
|----------|---------------|-----------|-----------|
| 1~10 | 200~500 | -50 | 쉬움 (금방 복구) |
| 11~30 | 500~1,000 | -50 | 보통 |
| 31~50 | 1,000~2,000 | -70 | 어려움 |
| 51~70 | 2,000~3,500 | -100 | 매우 어려움 |
| 71~90 | 3,500~5,000 | -150 | 극악 |
| 91~100 | 5,000~8,000 | -200 | 지옥 (유지가 목표) |

### 3.3 퀴즈(전투) 시스템

#### 3.3.1 전투 화면 구성 (모바일 UI)

```
┌─────────────────────────┐
│  [HP바] 몬스터 이름 Lv.5 │
│                         │
│    🐉 [몬스터 이미지]     │
│       HP ████████░░      │
│                         │
│ ┌─────────────────────┐ │
│ │                     │ │
│ │   [퀴즈 문제 영역]    │ │
│ │   분야: 네트워크      │ │
│ │                     │ │
│ └─────────────────────┘ │
│                         │
│ ┌─────────────────────┐ │
│ │  [주관식 답변 입력]    │ │
│ │                     │ │
│ └─────────────────────┘ │
│                         │
│  [⚔️ 공격! (제출)]      │
│                         │
│ ─── 내 캐릭터 ──────── │
│  🗡️ Lv.3 닉네임        │
│  HP ██████████  EXP 45% │
└─────────────────────────┘
```

#### 3.3.2 전투 흐름

1. **몬스터 등장**: 레벨에 맞는 몬스터 + 퀴즈 문제 출제
2. **답변 입력**: 주관식으로 답변 작성
3. **공격(제출)**: 답변 제출 → AI 채점 시작
4. **채점 결과 연출**:
   - 정답 → 크리티컬 히트 애니메이션 → 몬스터 HP 대폭 감소
   - 부분 정답 → 일반 공격 애니메이션 → 몬스터 HP 일부 감소
   - 오답 → 미스 애니메이션 → 몬스터가 반격 (내 HP 감소)
5. **AI 해설**: 정답/오답과 관계없이 상세 해설 표시
6. **보상**: EXP 획득 + 레벨업 체크
7. **다음 문제** 또는 **전투 종료**(몬스터 처치 시)

#### 3.3.3 몬스터 시스템

- 몬스터 1마리 = 퀴즈 3~5문제 (HP 기반)
- 정답 시 몬스터 HP가 줄어들고, 오답 시 내 HP가 줄어듦
- 내 HP가 0이 되면 전투 실패 → "재도전" 또는 "다른 몬스터"
- 몬스터 처치 시 보너스 EXP + 처치 기록
- **몬스터 이미지**: 레벨 구간별 고유 몬스터 이미지 (AI 생성 → Supabase Storage 저장)

몬스터 레벨 매핑 예시:

| 레벨 구간 | 몬스터 | 이미지 컨셉 |
|----------|--------|-----------|
| 1~10 | 버그 슬라임 | 초록색 젤리 + 코드 기호 |
| 11~25 | 에러 고블린 | 빨간 고블린 + 에러 메시지 |
| 26~40 | 레거시 오크 | 갑옷 오크 + 구식 코드 |
| 41~55 | 다운타임 늑대 | 어둠 늑대 + 서버 랙 |
| 56~70 | 메모리릭 드래곤 | 보라색 드래곤 + 메모리 파편 |
| 71~85 | 데드락 마왕 | 어둠 왕 + 체인 |
| 86~100 | 카오스 엔지니어 신 | 우주적 존재 + 인프라 |

### 3.4 AI 채점 시스템

#### 3.4.1 채점 방식

- **모델**: Gemini 3 Flash Preview (`gemini-3-flash-preview`)
- **채점 기준**:
  - 핵심 키워드 포함 여부
  - 개념의 정확성
  - 답변의 완성도
- **점수 체계**: 0.0 ~ 1.0 (소수점 1자리)
  - 1.0: 완벽한 정답
  - 0.5~0.9: 부분 정답 (핵심은 맞지만 불완전)
  - 0.1~0.4: 방향은 맞지만 핵심 누락
  - 0.0: 오답 또는 무관한 답변

#### 3.4.2 AI 응답 형식

```json
{
  "score": 0.7,
  "isCorrect": "partial",
  "feedback": "TLS 암호화를 언급한 것은 좋지만, 무결성 검증과 서버 인증도 HTTPS의 핵심 보안 요소입니다.",
  "correctAnswer": "HTTPS는 TLS 암호화(기밀성), 데이터 변조 감지(무결성), 인증서 기반 서버 인증 3가지를 제공합니다.",
  "tip": "HTTPS의 3대 보안 요소: 기밀성, 무결성, 인증"
}
```

### 3.5 문제별 정답률 표시

퀴즈 화면에서 문제 출제 시 **전체 유저 정답률**을 함께 노출한다.

- 문제 영역 하단에 `"이 문제 정답률: 23%"` 표시
- 정답률 색상: 높을수록 초록, 낮을수록 빨강
  - 80%+ : 초록 (쉬운 문제)
  - 50~79% : 노랑 (보통)
  - 30~49% : 주황 (어려움)
  - 30% 미만 : 빨강 (극악)
- 채점 결과 화면에서도 "상위 N%에 해당하는 답변입니다" 표시
- 정답률은 `questions` 테이블의 `total_attempts`, `correct_count`로 실시간 집계

효과: "정답률 12%짜리를 맞췄어ㅋㅋ" → 자랑하기 + 공유 욕구 자극

### 3.6 예상 연봉 시스템

캐릭터 레벨과 분야별 정답률 기반으로 **예상 IT 연봉**을 산출하여 프로필에 표시.
**한국고용정보원 공공데이터의 실제 직업별 임금 통계**를 기반으로 산출하여 현실감 부여.

#### 3.6.1 데이터 소스

| 소스 | 설명 | 용도 |
|------|------|------|
| [한국고용정보원 - 직업별 임금정보](https://www.data.go.kr/data/15122500/fileData.do) | 직업별 상위/중위/하위 임금 (공공데이터) | 분야별 기준 연봉 |
| [임금직무정보시스템 (wagework.go.kr)](https://www.wagework.go.kr/) | 고용노동부 직종별 임금 통계 | 보조 데이터 |

분야-직업 매핑:

| CS 분야 | 매핑 직업 (고용정보원 기준) |
|---------|------------------------|
| 네트워크 | 네트워크 엔지니어, 네트워크 관리자 |
| Linux/OS | 시스템 엔지니어, 시스템 관리자 |
| 데이터베이스 | 데이터베이스 관리자(DBA) |
| 배포/CI·CD | 데브옵스 엔지니어 |
| 모니터링 | 시스템 운영 엔지니어 |
| 보안 | 정보보안 전문가, 보안 엔지니어 |
| 아키텍처 | 소프트웨어 아키텍트 |
| 장애/SRE | 사이트 신뢰성 엔지니어(SRE) |

#### 3.6.2 연봉 산출 공식

```
예상 연봉 = 기준 연봉(레벨 구간) × 분야 보정 계수
```

**기준 연봉** (레벨 구간별, 공공데이터 중위 임금 기반):

| 레벨 구간 | 등급 | 기준 연봉 | 근거 |
|----------|------|----------|------|
| 1~10 | 인턴 | 2,400만원 | 하위 임금 기준 |
| 11~25 | 신입 | 3,500만원 | 하위~중위 임금 |
| 26~40 | 주니어 | 4,500만원 | 중위 임금 |
| 41~55 | 미드레벨 | 5,500만원 | 중위 임금 |
| 56~70 | 시니어 | 7,000만원 | 중위~상위 임금 |
| 71~85 | 리드 | 9,000만원 | 상위 임금 |
| 86~95 | CTO | 1.2억원 | 상위 임금 + 보정 |
| 96~100 | 전설의 개발자 | 2억원+ | 최상위 |

**분야 보정 계수**: 특화 분야(전직 직업)의 실제 중위 임금 반영
- 예: 보안 특화 유저 → 정보보안 전문가 중위 임금이 평균보다 높으면 상향 보정
- 정답률 높은 분야가 2개 이상이면 추가 보정 (+300~500만원)

#### 3.6.3 표시 & 활용

- 프로필 카드 + 공유 이미지에 예상 연봉 표시
- **"Lv.47 데이터 마법사 | 예상 연봉 5,800만원"** → 공유하고 싶어지는 요소
- 레벨 다운 시 연봉도 함께 떨어짐 → "연봉 지키려면 틀리면 안 돼..." 긴장감
- 프로필에 "실제 OO직군 중위 임금 기준" 출처 표기 (신뢰성)
- 데이터는 주기적으로 갱신 (공공데이터 연 1회 업데이트 시 반영)

### 3.7 인증 및 데이터 저장

#### 3.5.1 인증 플로우

```
첫 접속 → 캐릭터 생성(비로그인) → 퀴즈 플레이(localStorage)
                                         │
                                    레벨 5 도달 or 수동 클릭
                                         │
                                    로그인 유도 팝업
                                    "데이터를 저장하려면
                                     Google로 로그인하세요"
                                         │
                                    Google OAuth 로그인
                                         │
                                    localStorage → Supabase 동기화
```

- **Google OAuth만** 지원 (Supabase Auth)
- **Supabase Auth Proxy** 사용하여 빠른 인증 처리
- 로그인 전 데이터는 localStorage에 보관
- 로그인 시 자동으로 서버에 동기화

#### 3.5.2 로그인 유도 시점

- 레벨 5 도달 시 "데이터를 잃지 않으려면 로그인하세요" 팝업
- 메뉴에 상시 "로그인" 버튼 노출
- 강제 로그인은 절대 하지 않음 (언제든 비로그인 플레이 가능)

### 3.6 히스토리 시스템

#### 3.6.1 기록 항목

모든 퀴즈 플레이 기록을 저장:

| 필드 | 설명 |
|------|------|
| 문제 | 출제된 퀴즈 원문 |
| 분야 | CS 분야 (네트워크, DB 등) |
| 난이도 | 문제 레벨 |
| 내 답변 | 사용자가 입력한 주관식 답변 |
| AI 채점 | 점수 + 피드백 |
| 모범 답안 | AI가 제공한 정답 해설 |
| 풀이 일시 | timestamp |
| 소요 시간 | 답변 작성에 걸린 시간 |

#### 3.6.2 히스토리 뷰

- **타임라인 뷰**: 날짜별 풀이 기록 스크롤
- **분야별 필터**: 특정 분야만 보기
- **오답 노트**: 오답/부분 정답만 모아보기 (복습 기능)
- **통계**: 분야별 정답률, 총 문제 수, 평균 점수

---

## 4. 게이미피케이션 요소

### 4.1 핵심 게이미피케이션 매커니즘

| 요소 | 구현 | 목적 |
|------|------|------|
| **레벨 시스템** | Lv.1~100 + EXP 바 | 성장 실감 |
| **직업 전직** | 분야별 자동전직 (5단계) | 정체성 + 목표 |
| **전투 UI** | 몬스터 vs 캐릭터 | 학습 = 전투 |
| **연속 정답 콤보** | 콤보 카운터 + 보너스 EXP | 집중력 유지 |
| **일일 퀘스트** | "오늘 5문제 풀기" | 매일 접속 유도 |
| **칭호 시스템** | "네트워크 마스터", "DB 천재" 등 | 수집 욕구 |
| **HP 시스템** | 오답 시 HP 감소, 0이면 실패 | 긴장감 |
| **크리티컬 히트** | 완벽한 답변 시 크리티컬 연출 | 쾌감 |
| **몬스터 도감** | 처치한 몬스터 기록 | 수집 요소 |
| **주간 리포트** | 이번 주 성장 요약 | 성취감 |

### 4.2 칭호 시스템

특정 조건 달성 시 칭호 해금:

| 칭호 | 조건 |
|------|------|
| 첫 발걸음 | 첫 퀴즈 완료 |
| 5연속 정답왕 | 연속 5문제 정답 |
| 10연속 무쌍 | 연속 10문제 정답 |
| 네트워크 입문자 | 네트워크 문제 10개 정답 |
| DB 마스터 | DB 문제 50개 정답 |
| 전분야 정복자 | 모든 분야 문제 각 10개 이상 정답 |
| 불사조 | HP 1에서 전투 승리 |
| 레벨 50 돌파 | 레벨 50 달성 |
| 전설의 시작 | 레벨 100 달성 |

### 4.3 일일 퀘스트

매일 자동 생성되는 미니 미션:

- "오늘 5문제 풀기" → 보너스 EXP 200
- "네트워크 분야 3문제 정답" → 보너스 EXP 150
- "연속 3문제 정답 달성" → 보너스 EXP 100

### 4.4 후원 & 아이템샵 시스템

#### 4.4.1 개요

AI 채점에 사용되는 Gemini API 비용을 후원받는 시스템. **과금 모델이 아닌 자발적 후원**이며,
후원자에게는 캐릭터 코스튬 아이템을 제공한다. 게임 능력치에 영향 없는 **순수 꾸미기 아이템만** 제공.

> 원칙: Pay-to-Win 절대 금지. 후원 여부와 관계없이 퀴즈/레벨업/전직 등 모든 핵심 기능은 동일.

#### 4.4.2 결제 (토스페이먼츠)

- **결제 수단**: 토스페이먼츠 (카드, 토스페이, 간편결제 등)
- **후원 단위**: "젬(Gem)" 충전 방식

| 후원 금액 | 젬 수량 | 보너스 |
|----------|--------|--------|
| 1,000원 | 100젬 | - |
| 3,000원 | 300젬 | +30젬 보너스 |
| 5,000원 | 500젬 | +75젬 보너스 |
| 10,000원 | 1,000젬 | +200젬 보너스 |

- 로그인 필수 (후원 시 Google 로그인 유도)
- 환불 정책: 미사용 젬에 한해 7일 이내 환불 가능

#### 4.4.3 아이템샵

젬으로 구매 가능한 코스튬 아이템. **캐릭터 외형만 변경, 능력치 영향 없음.**

| 카테고리 | 아이템 예시 | 가격 |
|---------|-----------|------|
| 모자 | 프로그래머 후드, 해커 비니, 서버 헬멧, 클라우드 왕관 | 50~200젬 |
| 무기 스킨 | 기계식 키보드 검, USB 지팡이, 랜선 채찍, 마우스 해머 | 100~300젬 |
| 의상 | 터미널 로브, 깃헙 망토, AWS 갑옷, 404 티셔츠 | 150~500젬 |
| 이펙트 | 정답 시 불꽃 이펙트, 레벨업 무지개 빛기둥, 골드 데미지 폰트 | 200~400젬 |
| 펫 | 미니 도커 고래, 깃 고양이, 쿠버 조타기 | 300~500젬 |
| 칭호 프레임 | 골드 닉네임 테두리, 홀로그램 칭호 배경 | 100~250젬 |

#### 4.4.4 후원자 표시

- 닉네임 옆 작은 하트 뱃지 (후원 경험 1회 이상)
- 프로필에 "서포터" 태그 표시
- 후원 누적 금액별 뱃지 색상 변경 (브론즈/실버/골드)

| 누적 후원 | 뱃지 |
|----------|------|
| 1,000원+ | 브론즈 하트 |
| 10,000원+ | 실버 하트 |
| 50,000원+ | 골드 하트 |

#### 4.4.5 후원 진입점 (UI)

- **설정 화면**: "API 비용 후원하기" 버튼 (항상 노출)
- **메인(IT 빌리지)**: 아이템샵 NPC 건물 (탭하면 샵 진입)
- **프로필 화면**: 캐릭터 옆 "꾸미기" 버튼 → 아이템샵 연결
- **후원 안내 팝업**: 레벨 10 도달 시 1회 노출 ("이 서비스는 AI API 비용으로 운영됩니다. 후원으로 서비스 유지를 도와주세요!")
- 강제성 없음, 닫기 버튼 항상 존재

### 4.5 캐릭터 자랑하기 (공유 시스템)

#### 4.5.1 캐릭터 카드 이미지 자동 생성

서버에서 캐릭터 정보를 기반으로 트레이딩 카드 스타일 이미지를 동적 생성한다.
Next.js의 `ImageResponse` (og image generation)를 활용.

```
┌─────────────────────────┐
│  ✦ 메AI플스토리 ✦        │
│ ┌─────────────────────┐ │
│ │                     │ │
│ │   🧑‍💻 [캐릭터 이미지]  │ │
│ │   (장착 아이템 포함)   │ │
│ │                     │ │
│ └─────────────────────┘ │
│                         │
│  닉네임                  │
│  Lv.47 데이터 마법사      │
│  ─────────────────────  │
│  ⚔ 정답률 78%            │
│  📖 총 342문제 풀이       │
│  🏆 칭호: DB 마스터       │
│  🔥 최고 콤보: 12연속     │
│  💰 예상 연봉: 5,800만원   │
│  ─────────────────────  │
│  ❤️ 골드 서포터            │
│                         │
│  meaiple.gg/닉네임       │
└─────────────────────────┘
```

카드 디자인:
- 픽셀아트 테두리 프레임
- 장착한 코스튬 아이템이 캐릭터에 반영
- 후원 뱃지 티어에 따라 카드 테두리 색상 변경 (골드 후원자 = 금색 테두리)
- 직업별 배경색 (네트워크 기사 = 블루, 데이터 마법사 = 퍼플 등)

#### 4.5.2 공개 프로필 페이지

`/profile/[nickname]` 경로로 누구나 접근 가능한 공개 프로필 페이지.

- 로그인 없이 열람 가능
- 캐릭터 카드와 동일한 정보 표시 + 분야별 레이더 차트
- OG 메타 태그에 캐릭터 카드 이미지 삽입 → 링크 공유 시 미리보기에 카드가 뜸

```html
<meta property="og:title" content="Lv.47 데이터 마법사 | 메AI플스토리" />
<meta property="og:description" content="닉네임님의 CS 모험 기록" />
<meta property="og:image" content="/api/og/profile/닉네임" />
```

→ 카카오톡, 슬랙, 디스코드, 트위터 등에서 링크만 붙여넣으면 카드 이미지가 미리보기로 노출.

#### 4.5.3 공유 방법

프로필 화면 하단 "자랑하기" 버튼 탭 시:

| 방법 | 구현 |
|------|------|
| **링크 복사** | 공개 프로필 URL 클립보드 복사 (`meaiple.gg/닉네임`) |
| **이미지 저장** | 캐릭터 카드 이미지 PNG 다운로드 (갤러리 저장) |
| **네이티브 공유** | Web Share API → OS 공유 시트 (카카오톡, 인스타, 문자 등 한 번에) |

- Web Share API 지원 시: OS 네이티브 공유 시트 호출 (모바일에서 카톡, 인스타 등 바로 선택)
- 미지원 시: 링크 복사 + 이미지 저장 폴백

#### 4.5.4 자랑하기 보너스

공유 행위에 대한 소소한 보상으로 바이럴 유도:

- 첫 공유 시: +50 EXP 보너스 + "소셜 모험가" 칭호 해금
- 공유 링크로 신규 유저 유입 시: 레퍼럴 보너스 +100 EXP (추후 Phase 2)

### 4.6 랭킹 시스템

#### 4.6.1 개요

경쟁심리를 자극하는 다중 랭킹 보드. "나보다 한 단계 위" 유저가 항상 보이게 설계하여
끊임없이 추월 욕구를 유발한다.

#### 4.6.2 랭킹 종류

| 랭킹 | 기준 | 갱신 주기 | 설명 |
|------|------|----------|------|
| **종합 랭킹** | 레벨 + 총 EXP | 실시간 | 전체 유저 레벨 순위 |
| **주간 랭킹** | 이번 주 획득 EXP | 매주 월요일 00:00 초기화 | 이번 주 가장 열심히 한 유저 |
| **분야별 랭킹** | 분야별 정답 수 + 정답률 | 실시간 | 네트워크 1위, DB 1위 등 8개 분야 |
| **연속 정답 랭킹** | 역대 최고 콤보 | 실시간 | 가장 긴 연속 정답 기록 |
| **명예의 전당** | 시즌 종합 1~3위 | 시즌 종료 시 확정 | 영구 기록. 시즌별 전설의 모험가 |

#### 4.6.3 시즌제

- 1시즌 = 4주 (월 단위)
- 시즌 종료 시:
  - 종합 1~3위 → "명예의 전당" 영구 등록 + 한정 칭호
  - 주간 랭킹 1위 횟수에 따른 시즌 보상
- 시즌 보상:

| 순위 | 보상 |
|------|------|
| 1위 | 한정 칭호 "시즌 N 전설" + 한정 캐릭터 프레임 + 300 EXP |
| 2위 | 한정 칭호 "시즌 N 영웅" + 200 EXP |
| 3위 | 한정 칭호 "시즌 N 강자" + 100 EXP |
| 4~10위 | 한정 칭호 "시즌 N 정예" |

#### 4.6.4 경쟁 심리 유발 장치

| 장치 | 설명 |
|------|------|
| **"곧 추월당합니다!"** | 바로 아래 유저와 EXP 차이가 100 이내일 때 푸시 알림 스타일 배너 |
| **"N위까지 OO EXP"** | 내 바로 위 순위까지 필요한 EXP를 항상 표시 |
| **실시간 순위 변동** | 퀴즈 정답 시 랭킹 순위가 올라가는 애니메이션 (+3↑) |
| **내 주변 랭킹** | 전체 랭킹에서 내 순위 ± 5명을 항상 보여줌 (나만 하이라이트) |
| **왕관 표시** | 1위는 금왕관, 2위 은왕관, 3위 동왕관 아이콘 |
| **주간 MVP** | 주간 랭킹 1위 유저를 IT 빌리지 메인에 "이번 주 최강 모험가"로 노출 |
| **신기록 알림** | 역대 최고 콤보 갱신 시 전체 유저에게 공지 배너 ("XX님이 15연속 정답 신기록!") |

#### 4.6.5 랭킹 UI

```
┌─────────────────────────┐
│ 🏆 랭킹     [종합|주간|분야]│
│                          │
│  👑 1위  Lv.87 서버지킴이  │
│  ├ 아키텍트 대마법사       │
│  └ EXP 245,300           │
│                          │
│  🥈 2위  Lv.82 코드마스터  │
│  ├ 보안 레인저            │
│  └ EXP 220,100           │
│                          │
│  🥉 3위  Lv.79 버그헌터   │
│  ├ 네트워크 기사          │
│  └ EXP 198,500           │
│                          │
│  ┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈  │
│                          │
│  42위  Lv.48 ...         │
│  43위  Lv.47 ...         │
│ ▶44위  Lv.47 나 ◀ ← 하이라이트│
│  45위  Lv.46 ...         │
│  46위  Lv.45 ...         │
│                          │
│  ⬆ 43위까지 EXP 120 남음  │
│                          │
│ ═════════════════════════│
│ Lv.47 ████████░░ 68%     │
└─────────────────────────┘
```

#### 4.6.6 분야별 랭킹 탭

```
[전체] [네트워크] [Linux] [DB] [배포] [모니터링] [보안] [아키텍처] [SRE]
```

각 분야 탭 선택 시 해당 분야 정답 수 + 정답률 기준 랭킹 표시.
→ "나는 종합 44위지만 DB 분야는 7위!" 같은 세분화된 경쟁 유도.

---

## 5. UI/UX 설계

> **디자인 레퍼런스**: 메이플스토리의 2D 사이드뷰 RPG 감성을 차용하되, 저작권 침해를 피하기 위해
> 독자적인 아트 스타일로 재해석한다. "메이플 감성의 짭플스토리" 느낌.

### 5.1 디자인 원칙

- **Mobile-First (모바일 Only)**: PC에서도 모바일 UI로 표시 (max-width: 430px, 중앙 정렬)
- **2D 픽셀아트 + 도트 감성**: 메이플스토리풍 2D 사이드뷰, 캐릭터/몬스터는 픽셀아트 스타일
- **밝고 따뜻한 톤**: 메이플의 밝은 파스텔 + 판타지 색감 차용 (다크 테마 X)
- **둥근 UI 프레임**: 메이플스토리 특유의 둥근 모서리 윈도우 + 스크롤 장식 테두리
- **한 손 조작**: 하단 중심 인터랙션, 엄지 영역에 핵심 버튼 배치
- **과장된 이펙트**: 레벨업 빛기둥, 데미지 숫자 팝업, 전직 연출 등 화려한 애니메이션

### 5.2 메이플 감성 UI 요소 (저작권 회피 버전)

| 메이플 원본 요소 | 메AI플스토리 변형 | 차별화 포인트 |
|----------------|-----------------|-------------|
| EXP 바 (하단 노란색) | 하단 고정 EXP 바 (그라데이션 민트→골드) | 색상/형태 변경, 퍼센트 + 레벨 텍스트 |
| 캐릭터 (SD 2등신) | 3등신 픽셀 캐릭터 (직업별 의상) | 등신 비율 변경, 독자 디자인 |
| 데미지 스킨 (숫자 팝업) | 채점 점수 팝업 (+100 EXP, MISS!, CRITICAL!) | 폰트/색상 독자적, CS 용어 혼합 |
| 말풍선 (NPC 대화) | 둥근 말풍선 (AI 채점 피드백) | 꼬리 형태 변경, 코드 블록 스타일 |
| 미니맵 (우상단) | 분야 진행도 미니 차트 (우상단) | 레이더 차트 형태로 변형 |
| 인벤토리 창 | 히스토리/칭호 창 (같은 윈도우 프레임) | 나무 프레임 → 코드 에디터 프레임 |
| 퀵슬롯 (하단) | 하단 액션 바 (퀴즈 시작, 도감, 프로필) | 둥근 아이콘, 3~4개 슬롯 |
| 사냥터 배경 | 분야별 배경 (서버실, 터미널, 클라우드 등) | IT 테마 배경으로 완전 차별화 |
| 몬스터 (귀여운 SD) | IT 테마 몬스터 (버그 슬라임, 에러 고블린) | 완전 독자 디자인 |
| 레벨업 이펙트 (빛기둥) | 레벨업 빛기둥 + 코드 파티클 | 코드 조각이 흩날리는 연출 |
| 전직 퀘스트 | 자동전직 연출 (캐릭터 변신) | 분야 아이콘 회전 + 빛 폭발 |

### 5.3 화면별 상세 UI

#### 5.3.1 캐릭터 생성 화면

```
┌─────────────────────────┐
│                         │
│   ✦ 메AI플스토리 ✦      │
│   "CS 모험의 시작"       │
│                         │
│  ┌───────────────────┐  │
│  │                   │  │
│  │  [캐릭터 프리뷰]    │  │
│  │   픽셀아트 캐릭터    │  │
│  │   좌우 화살표로 선택  │  │
│  │  ◀  🧑‍💻  ▶         │  │
│  │                   │  │
│  └───────────────────┘  │
│                         │
│  닉네임: [____________]  │
│                         │
│  외형:  ① ② ③ ④        │
│         (픽셀 아바타)    │
│                         │
│  ┌───────────────────┐  │
│  │  ⚔️ 모험 시작하기!  │  │
│  └───────────────────┘  │
│                         │
│  작은 글씨: 로그인 없이   │
│  바로 시작할 수 있어요    │
└─────────────────────────┘
```

#### 5.3.2 메인 화면 (월드맵)

메이플스토리의 마을 느낌. 배경에 IT 테마 풍경 (서버실 마을, 클라우드 하늘).

```
┌─────────────────────────┐
│ [분야 차트]    [⚙설정]   │
│                         │
│  ☁️ ☁️    ☁️             │
│ ~~~IT 빌리지~~~          │
│  🏠  🏰  🏪              │
│ ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓ │
│                         │
│     🧑‍💻 Lv.12           │
│     닉네임               │
│     네트워크 기사         │
│                         │
│ ┌─────────┐┌─────────┐  │
│ │ ⚔️ 사냥  ││ 📖 도감  │  │
│ │  하러가기 ││  보기   │  │
│ └─────────┘└─────────┘  │
│ ┌─────────┐┌─────────┐  │
│ │ 📜 기록  ││ 🏆 칭호  │  │
│ │  보기   ││  보기   │  │
│ └─────────┘└─────────┘  │
│                         │
│ ═══════════════════════ │
│ Lv.12 ████████░░ 68%    │
│ EXP 680/1000            │
└─────────────────────────┘
```

#### 5.3.3 전투 화면 (퀴즈)

메이플 사냥터 느낌. 2D 사이드뷰로 캐릭터와 몬스터가 마주보는 구도.

```
┌─────────────────────────┐
│ 🌲서버실 던전 B2F   [도망]│
│                         │
│  ┌── 에러 고블린 ─────┐  │
│  │ HP ████████░░ 3/5  │  │
│  └────────────────────┘  │
│                         │
│        👾                │
│    [몬스터 픽셀아트]      │
│  ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓  │
│        🧑‍💻              │
│     [내 캐릭터]          │
│                         │
│ ╔═══════════════════════╗│
│ ║ Q. DNS 조회 과정을     ║│
│ ║ 순서대로 설명하세요.    ║│
│ ║ [네트워크] ⭐Lv.1      ║│
│ ║ 정답률 23% 🔴          ║│
│ ╚═══════════════════════╝│
│                         │
│ ┌─────────────────────┐ │
│ │ 답변을 입력하세요...   │ │
│ │                     │ │
│ │                     │ │
│ └─────────────────────┘ │
│                         │
│ ┌─────────────────────┐ │
│ │    ⚔️ 공격하기!      │ │
│ └─────────────────────┘ │
│ ═══════════════════════ │
│ HP ██████████  Lv.12    │
└─────────────────────────┘
```

#### 5.3.4 채점 결과 연출

```
정답 시:                    오답 시:
┌──────────────┐           ┌──────────────┐
│              │           │              │
│  CRITICAL!   │           │    MISS!     │
│  +100 EXP    │           │   -1 ❤️      │
│  (숫자 팝업)  │           │  몬스터 반격!  │
│              │           │              │
│  ✨ 캐릭터가   │           │  💥 몬스터가   │
│  공격 모션!   │           │  공격 모션!    │
│              │           │              │
│ ┌──────────┐ │           │ ┌──────────┐ │
│ │AI 해설    │ │           │ │AI 해설    │ │
│ │정답: ...  │ │           │ │정답: ...  │ │
│ │팁: ...    │ │           │ │팁: ...    │ │
│ └──────────┘ │           │ └──────────┘ │
│              │           │              │
│ [다음 문제 ▶] │           │ [다음 문제 ▶] │
└──────────────┘           └──────────────┘
```

#### 5.3.5 레벨업 연출

메이플스토리의 레벨업 빛기둥 오마주 (독자 디자인):

- 화면 중앙에 캐릭터
- 아래에서 위로 빛기둥 솟아오름 (민트 + 골드 그라데이션)
- `{ }`, `< />`, `=>`, `SELECT *` 등 코드 파티클이 빛기둥과 함께 흩날림
- "LEVEL UP!" 텍스트 팝업 (픽셀 폰트)
- 새 레벨 숫자가 크게 표시
- 진동 피드백 (모바일)

#### 5.3.6 전직 연출

- 캐릭터가 화면 중앙에서 빛에 감싸임
- 분야 아이콘 (네트워크 케이블, DB 실린더 등)이 캐릭터 주위를 회전
- 빛 폭발 → 새로운 직업 의상의 캐릭터 등장
- "전직! [네트워크 기사]" 텍스트 + 팡파르 효과음
- 새 직업 스킬/능력 안내 팝업

### 5.4 화면 목록

| 화면 | 설명 | 로그인 필요 |
|------|------|-----------|
| 캐릭터 생성 | 닉네임 + 픽셀 아바타 선택 | X |
| 메인 (IT 빌리지) | 마을 배경 + 캐릭터 + 메뉴 버튼 | X |
| 전투 (사냥터) | 2D 사이드뷰 몬스터 전투 + 퀴즈 | X |
| 채점 결과 | 데미지 팝업 + AI 해설 | X |
| 레벨업 연출 | 빛기둥 + 코드 파티클 | X |
| 전직 연출 | 직업 변경 변신 애니메이션 | X |
| 캐릭터 프로필 | 스탯 창 (메이플 캐릭터 창 오마주) | X |
| 히스토리 | 풀이 기록 (인벤토리 창 스타일) | △ (비로그인은 현재 세션만) |
| 몬스터 도감 | 몬스터북 (도감 UI) | △ |
| 칭호 목록 | 획득/미획득 칭호 | △ |
| 랭킹 | 종합/주간/분야별 순위표 | X (열람 자유, 참여는 로그인) |
| 명예의 전당 | 시즌별 1~3위 영구 기록 | X |
| 아이템샵 | 코스튬 아이템 구매 | O |
| 후원하기 | 토스페이먼츠 젬 충전 | O |
| 설정 | 로그인/로그아웃, 알림 | X |

### 5.5 컬러 시스템

메이플스토리의 밝은 판타지 톤을 차용하되 IT 감성 추가:

```
배경: #F5F0E8 (따뜻한 아이보리 - 메이플 마을 느낌)
카드/윈도우 프레임: #FFF8ED (크림) + #8B6914 (갈색 테두리 - 나무 프레임풍)
주요 액센트: #FF6B35 (오렌지 - 공격/크리티컬)
보조 액센트: #4ECDC4 (민트 - 정답/레벨업)
EXP 바: #FFD700 → #FFA500 (골드 그라데이션)
HP 바: #FF4757 → #FF6B81 (레드 그라데이션)
MP/스태미나 바: #3742FA → #70A1FF (블루 그라데이션)
텍스트: #2C2C2C (메인) / #7C7C7C (서브)
몬스터 HP: #FF3838
퀴즈 영역 배경: #FFFDF7 (밝은 크림)
버튼: #FF6B35 (주요) / #4ECDC4 (보조)
```

### 5.6 폰트 & 아이콘

- **제목/레벨 텍스트**: 픽셀 폰트 (예: DungGeunMo, 갈무리체 등 무료 한글 픽셀 폰트)
- **본문/퀴즈**: Pretendard (가독성 우선)
- **데미지 숫자**: 굵은 픽셀 폰트 + 외곽선 (흰 테두리 + 컬러 채우기)
- **아이콘**: 픽셀아트 스타일 커스텀 아이콘 (검, 방패, 지팡이 등)

### 5.7 사운드 (선택사항, Phase 2)

- 전투 BGM (8bit 스타일)
- 정답 효과음 (찰칵 + 크리티컬 사운드)
- 오답 효과음 (미스 사운드)
- 레벨업 팡파르
- 전직 팡파르
- 기본 OFF, 설정에서 ON 가능

### 5.8 저작권 회피 가이드라인

| 항목 | 하면 안 되는 것 | 해야 하는 것 |
|------|---------------|-------------|
| 캐릭터 | 메이플 캐릭터 트레이싱/모방 | 독자적 3등신 픽셀 캐릭터 디자인 |
| 몬스터 | 주황버섯, 슬라임 등 메이플 몬스터 복제 | IT 테마 독자 몬스터 (버그, 에러 등) |
| UI 프레임 | 메이플 UI 스크린샷 사용 | 둥근 프레임 느낌만 차용, 독자 디자인 |
| 폰트 | 메이플스토리체 사용 | 무료 픽셀 폰트 사용 |
| 효과음/BGM | 메이플 원본 사운드 사용 | 프리 라이선스 8bit 사운드 |
| 맵 배경 | 메이플 맵 이미지 사용 | IT 테마 독자 배경 (서버실, 터미널 등) |
| 용어 | "메소", "스타포스" 등 메이플 고유 용어 | "EXP", "골드", "전직" 등 일반 RPG 용어 |

---

## 6. 데이터베이스 설계

### 6.1 Supabase 테이블

#### `profiles` (사용자 프로필)

| 컬럼 | 타입 | 설명 |
|------|------|------|
| id | uuid (PK) | Supabase Auth user ID |
| nickname | text | 게임 닉네임 |
| gem_balance | int | 보유 젬 (기본 0) |
| total_donated | int | 누적 후원 금액 (원) |
| supporter_tier | text | 후원 뱃지 ('none' / 'bronze' / 'silver' / 'gold') |
| level | int | 현재 레벨 (1~100) |
| exp | int | 현재 경험치 |
| hp | int | 현재 HP |
| max_hp | int | 최대 HP |
| job_class | text | 현재 직업 |
| job_tier | int | 전직 단계 (1~5) |
| top_category | text | 최고 정답률 분야 |
| avatar_type | text | 캐릭터 외형 |
| estimated_salary | int | 예상 연봉 (만원 단위) |
| best_combo | int | 역대 최고 연속 정답 수 |
| weekly_exp | int | 이번 주 획득 EXP (매주 초기화) |
| created_at | timestamptz | 생성일 |
| updated_at | timestamptz | 수정일 |

#### `quiz_history` (퀴즈 풀이 기록)

| 컬럼 | 타입 | 설명 |
|------|------|------|
| id | uuid (PK) | |
| user_id | uuid (FK) | profiles.id |
| question_id | uuid (FK) | questions.id |
| user_answer | text | 사용자 답변 |
| ai_score | decimal | AI 채점 점수 (0.0~1.0) |
| ai_feedback | text | AI 피드백 |
| ai_correct_answer | text | AI 모범 답안 |
| is_correct | text | 'correct' / 'partial' / 'wrong' |
| exp_earned | int | 획득 EXP |
| time_spent_sec | int | 소요 시간 (초) |
| combo_count | int | 당시 콤보 수 |
| monster_id | uuid (FK) | 전투 중인 몬스터 |
| created_at | timestamptz | 풀이 일시 |

#### `questions` (문제 은행)

| 컬럼 | 타입 | 설명 |
|------|------|------|
| id | uuid (PK) | |
| category | text | 분야 (network, linux, db 등) |
| subcategory | text | 세부 주제 (DNS, TCP 등) |
| difficulty | int | 난이도 (1~4) |
| level_min | int | 최소 출제 레벨 |
| level_max | int | 최대 출제 레벨 |
| question_text | text | 문제 내용 |
| correct_answer | text | 모범 답안 |
| keywords | text[] | 채점 핵심 키워드 |
| explanation | text | 해설 |
| source_doc | text | 출처 docs 파일 |
| total_attempts | int | 총 풀이 횟수 (기본 0) |
| correct_count | int | 정답 횟수 (기본 0) |
| accuracy_rate | decimal | 정답률 (자동 계산, 0.0~1.0) |
| created_at | timestamptz | |

#### `monsters` (몬스터)

| 컬럼 | 타입 | 설명 |
|------|------|------|
| id | uuid (PK) | |
| name | text | 몬스터 이름 |
| level_min | int | 출현 최소 레벨 |
| level_max | int | 출현 최대 레벨 |
| hp | int | 기본 HP |
| image_url | text | 이미지 URL (Supabase Storage) |
| description | text | 몬스터 설명 |
| category | text | 관련 CS 분야 (nullable) |

#### `achievements` (칭호/업적)

| 컬럼 | 타입 | 설명 |
|------|------|------|
| id | uuid (PK) | |
| code | text (UNIQUE) | 칭호 코드 |
| name | text | 칭호 이름 |
| description | text | 달성 조건 설명 |
| icon | text | 아이콘/이모지 |

#### `user_achievements` (사용자 칭호)

| 컬럼 | 타입 | 설명 |
|------|------|------|
| id | uuid (PK) | |
| user_id | uuid (FK) | profiles.id |
| achievement_id | uuid (FK) | achievements.id |
| earned_at | timestamptz | 획득 일시 |

#### `daily_quests` (일일 퀘스트)

| 컬럼 | 타입 | 설명 |
|------|------|------|
| id | uuid (PK) | |
| user_id | uuid (FK) | profiles.id |
| quest_type | text | 퀘스트 종류 |
| target_count | int | 목표 수 |
| current_count | int | 현재 달성 수 |
| bonus_exp | int | 보상 EXP |
| quest_date | date | 퀘스트 날짜 |
| completed | boolean | 완료 여부 |

#### `shop_items` (아이템샵 상품)

| 컬럼 | 타입 | 설명 |
|------|------|------|
| id | uuid (PK) | |
| name | text | 아이템 이름 |
| category | text | 'hat' / 'weapon_skin' / 'costume' / 'effect' / 'pet' / 'frame' |
| description | text | 아이템 설명 |
| price_gem | int | 가격 (젬) |
| image_url | text | 아이템 이미지 URL |
| rarity | text | 'common' / 'rare' / 'epic' / 'legendary' |
| created_at | timestamptz | |

#### `user_items` (사용자 보유 아이템)

| 컬럼 | 타입 | 설명 |
|------|------|------|
| id | uuid (PK) | |
| user_id | uuid (FK) | profiles.id |
| item_id | uuid (FK) | shop_items.id |
| equipped | boolean | 장착 여부 |
| purchased_at | timestamptz | 구매 일시 |

#### `donations` (후원 내역)

| 컬럼 | 타입 | 설명 |
|------|------|------|
| id | uuid (PK) | |
| user_id | uuid (FK) | profiles.id |
| amount | int | 결제 금액 (원) |
| gem_amount | int | 지급된 젬 수량 (보너스 포함) |
| payment_key | text | 토스페이먼츠 paymentKey |
| order_id | text (UNIQUE) | 주문 ID |
| status | text | 'pending' / 'confirmed' / 'cancelled' / 'refunded' |
| created_at | timestamptz | |

#### `seasons` (시즌)

| 컬럼 | 타입 | 설명 |
|------|------|------|
| id | uuid (PK) | |
| season_number | int (UNIQUE) | 시즌 번호 |
| starts_at | timestamptz | 시즌 시작일 |
| ends_at | timestamptz | 시즌 종료일 |
| status | text | 'upcoming' / 'active' / 'ended' |

#### `hall_of_fame` (명예의 전당)

| 컬럼 | 타입 | 설명 |
|------|------|------|
| id | uuid (PK) | |
| season_id | uuid (FK) | seasons.id |
| user_id | uuid (FK) | profiles.id |
| rank | int | 최종 순위 (1, 2, 3) |
| final_level | int | 시즌 종료 시 레벨 |
| final_exp | int | 시즌 종료 시 총 EXP |
| title_awarded | text | 부여된 한정 칭호 |

#### `category_stats` (분야별 통계 - 랭킹 집계용)

| 컬럼 | 타입 | 설명 |
|------|------|------|
| id | uuid (PK) | |
| user_id | uuid (FK) | profiles.id |
| category | text | 분야 (network, linux, db 등) |
| correct_count | int | 정답 수 |
| total_count | int | 총 풀이 수 |
| accuracy | decimal | 정답률 (자동 계산) |
| updated_at | timestamptz | |
| UNIQUE | (user_id, category) | 유저당 분야별 1행 |

#### `battle_sessions` (전투 세션)

| 컬럼 | 타입 | 설명 |
|------|------|------|
| id | uuid (PK) | |
| user_id | uuid (FK) | profiles.id |
| monster_id | uuid (FK) | monsters.id |
| monster_hp | int | 남은 몬스터 HP |
| user_hp | int | 남은 유저 HP |
| status | text | 'active' / 'victory' / 'defeat' |
| questions_answered | int | 답변한 문제 수 |
| created_at | timestamptz | |
| completed_at | timestamptz | |

### 6.2 RLS (Row Level Security)

모든 테이블에 RLS 적용:
- `profiles`: 본인 데이터만 읽기/쓰기
- `quiz_history`: 본인 기록만 읽기/쓰기
- `questions`: 모든 인증 사용자 읽기 가능
- `monsters`: 모든 사용자 읽기 가능 (public)
- `achievements`: 모든 사용자 읽기 가능 (public)
- `user_achievements`: 본인 데이터만 읽기/쓰기
- `daily_quests`: 본인 데이터만 읽기/쓰기
- `battle_sessions`: 본인 데이터만 읽기/쓰기
- `shop_items`: 모든 사용자 읽기 가능 (public)
- `user_items`: 본인 데이터만 읽기/쓰기
- `donations`: 본인 데이터만 읽기, 서버만 쓰기 (service_role)
- `seasons`: 모든 사용자 읽기 가능 (public)
- `hall_of_fame`: 모든 사용자 읽기 가능 (public)
- `category_stats`: 읽기는 모든 사용자 (랭킹 조회), 쓰기는 본인만

---

## 7. API 설계 (Next.js Route Handlers)

### 7.1 인증

| Method | Endpoint | 설명 |
|--------|----------|------|
| POST | `/api/auth/callback` | Google OAuth 콜백 |
| POST | `/api/auth/sync` | localStorage → 서버 동기화 |

### 7.2 게임

| Method | Endpoint | 설명 |
|--------|----------|------|
| POST | `/api/game/create-character` | 캐릭터 생성 |
| GET | `/api/game/profile` | 프로필 조회 |
| PATCH | `/api/game/profile` | 프로필 업데이트 |

### 7.3 전투

| Method | Endpoint | 설명 |
|--------|----------|------|
| POST | `/api/battle/start` | 전투 시작 (몬스터 + 문제 배정) |
| POST | `/api/battle/answer` | 답변 제출 → AI 채점 → 결과 반환 |
| POST | `/api/battle/end` | 전투 종료 처리 |

### 7.4 히스토리

| Method | Endpoint | 설명 |
|--------|----------|------|
| GET | `/api/history` | 풀이 기록 조회 (필터, 페이지네이션) |
| GET | `/api/history/stats` | 분야별 통계 |
| GET | `/api/history/wrong-notes` | 오답 노트 |

### 7.5 퀘스트/업적

| Method | Endpoint | 설명 |
|--------|----------|------|
| GET | `/api/quests/daily` | 오늘의 일일 퀘스트 |
| GET | `/api/achievements` | 업적 목록 + 달성 여부 |

### 7.6 공유/공개 프로필

| Method | Endpoint | 설명 |
|--------|----------|------|
| GET | `/api/og/profile/[nickname]` | OG 캐릭터 카드 이미지 동적 생성 (ImageResponse) |
| GET | `/api/profile/[nickname]` | 공개 프로필 데이터 조회 |

### 7.7 랭킹

| Method | Endpoint | 설명 |
|--------|----------|------|
| GET | `/api/ranking/overall` | 종합 랭킹 (레벨 + EXP 순) |
| GET | `/api/ranking/weekly` | 주간 랭킹 (이번 주 EXP 순) |
| GET | `/api/ranking/category/[category]` | 분야별 랭킹 |
| GET | `/api/ranking/combo` | 연속 정답 랭킹 |
| GET | `/api/ranking/me` | 내 순위 + 주변 ±5명 |
| GET | `/api/ranking/hall-of-fame` | 명예의 전당 (시즌별 1~3위) |

### 7.8 후원/아이템샵

| Method | Endpoint | 설명 |
|--------|----------|------|
| POST | `/api/payment/ready` | 토스페이먼츠 결제 준비 (orderId 생성) |
| POST | `/api/payment/confirm` | 결제 승인 (토스 successUrl 콜백 후) |
| GET | `/api/payment/history` | 후원 내역 조회 |
| GET | `/api/shop/items` | 아이템샵 상품 목록 |
| POST | `/api/shop/purchase` | 아이템 구매 (젬 차감) |
| PATCH | `/api/shop/equip` | 아이템 장착/해제 |
| GET | `/api/shop/inventory` | 내 보유 아이템 목록 |

---

## 8. 문제 은행 구축 계획

### 8.1 현재 보유 분야 (docs/ 기반)

| # | 분야 | 파일 | 난이도 범위 |
|---|------|------|-----------|
| 1 | 네트워크 | `01-network.md` | Level 1~4 |
| 2 | Linux/OS | `02-linux-os.md` | Level 1~4 |
| 3 | 데이터베이스 | `03-database.md` | Level 1~4 |
| 4 | 배포/CI·CD | `04-deployment-cicd.md` | Level 1~4 |
| 5 | 모니터링 | `05-monitoring-observability.md` | Level 1~4 |
| 6 | 보안 | `06-security.md` | Level 1~4 |
| 7 | 아키텍처 | `07-architecture-scalability.md` | Level 1~4 |
| 8 | 장애/SRE | `08-incident-sre.md` | Level 1~4 |

### 8.2 문제 생성 전략

- docs의 레벨별 지식을 기반으로 문제 자동 생성 (AI 활용)
- 분야당 최소 50문제 (총 400문제+) 초기 구축
- 난이도 4단계를 게임 레벨 1~100에 매핑
- 지속적으로 추가 분야 및 문제 확장 예정

### 8.3 추후 추가 예정 분야

- 클라우드 (AWS/GCP/Azure)
- 컨테이너 (Docker/Kubernetes)
- 메시지 큐 (Kafka, RabbitMQ)
- 캐싱 (Redis, Memcached)
- API 설계 (REST, GraphQL, gRPC)
- Git/형상관리

---

## 9. 프로젝트 구조

```
cs-knowledge/
├── docs/                     # CS 지식 원본 문서
│   ├── 01-network.md
│   ├── ...
│   └── quiz-record.md
├── src/
│   ├── app/                  # Next.js App Router
│   │   ├── layout.tsx        # 모바일 레이아웃
│   │   ├── page.tsx          # 캐릭터 생성 / 메인 분기
│   │   ├── world/            # 월드맵 (메인)
│   │   ├── battle/           # 전투 화면
│   │   ├── result/           # 전투 결과
│   │   ├── shop/             # 아이템샵
│   │   ├── donate/           # 후원하기 (결제)
│   │   ├── profile/[nickname]/ # 공개 프로필 (공유용)
│   │   ├── ranking/          # 랭킹
│   │   ├── profile/          # 캐릭터 프로필
│   │   ├── history/          # 히스토리
│   │   ├── achievements/     # 칭호/업적
│   │   ├── bestiary/         # 몬스터 도감
│   │   └── api/              # Route Handlers
│   │       ├── auth/
│   │       ├── game/
│   │       ├── battle/
│   │       ├── history/
│   │       ├── quests/
│   │       ├── payment/        # 토스페이먼츠 결제
│   │       ├── shop/           # 아이템샵
│   │       └── ranking/        # 랭킹 API
│   ├── components/           # 공통 컴포넌트
│   │   ├── ui/               # 기본 UI (버튼, 카드 등)
│   │   ├── game/             # 게임 UI (HP바, EXP바 등)
│   │   ├── battle/           # 전투 컴포넌트
│   │   └── animations/       # 애니메이션 컴포넌트
│   ├── lib/                  # 유틸리티
│   │   ├── supabase/         # Supabase 클라이언트
│   │   ├── gemini/           # Gemini AI 채점
│   │   ├── toss-payments/    # 토스페이먼츠 SDK
│   │   ├── game-logic/       # 게임 로직 (EXP, 레벨업, 전직)
│   │   └── storage/          # localStorage 관리
│   ├── hooks/                # Custom hooks
│   ├── types/                # TypeScript 타입
│   └── constants/            # 상수 (레벨 테이블, 직업 등)
├── public/
│   └── images/               # 정적 이미지
├── supabase/
│   ├── migrations/           # DB 마이그레이션
│   └── seed.sql              # 초기 데이터
├── PRD.md                    # 이 문서
├── next.config.ts
├── tailwind.config.ts
├── bun.lock                  # Bun 락파일
├── package.json
└── tsconfig.json
```

---

## 10. MVP 범위 (Phase 1)

### 포함

- [x] 캐릭터 생성 (닉네임 + 외형)
- [x] 레벨 시스템 (1~100) + EXP
- [x] 전투 UI (몬스터 vs 캐릭터)
- [x] 주관식 퀴즈 + Gemini AI 채점
- [x] 몬스터 시스템 (레벨별)
- [x] HP 시스템
- [x] 연속 정답 콤보
- [x] 기본 직업 전직 (1~2단계)
- [x] Google 로그인 (Supabase Auth)
- [x] 비로그인 플레이 (localStorage)
- [x] 풀이 히스토리
- [x] 오답 노트
- [x] 분야별 통계
- [x] 문제 은행 초기 구축 (8분야 × 50문제)
- [x] API 비용 후원 (토스페이먼츠)
- [x] 아이템샵 (코스튬 꾸미기)
- [x] 후원자 뱃지
- [x] 캐릭터 자랑하기 (카드 이미지 + 공개 프로필 + 공유)
- [x] 랭킹 시스템 (종합 + 주간 + 분야별 + 콤보)
- [x] 시즌제 + 명예의 전당

### 미포함 (Phase 2+)

- [ ] 일일 퀘스트
- [ ] 칭호/업적 시스템
- [ ] 몬스터 도감
- [ ] 주간 리포트
- [ ] 추가 CS 분야
- [ ] 친구 시스템 (팔로우, 친구 랭킹)
- [ ] PWA (오프라인 지원)
- [ ] 푸시 알림

---

## 11. 성공 지표

| 지표 | 목표 |
|------|------|
| 일일 퀴즈 풀이 수 | 유저당 평균 10문제 이상 |
| 재방문율 | 7일 재방문 30% 이상 |
| 평균 세션 시간 | 10분 이상 |
| 레벨 10 도달률 | 첫 접속 유저 중 50% 이상 |
| Google 로그인 전환율 | 레벨 5 도달 유저 중 40% 이상 |

---

## 12. 향후 확장 계획

1. **Phase 2**: 일일 퀘스트 + 칭호 시스템 + 몬스터 도감
2. **Phase 3**: 소셜 기능 (랭킹 보드, 길드)
3. **Phase 4**: 멀티플레이 (실시간 퀴즈 대전)
4. **Phase 5**: AI 기반 맞춤 문제 출제 (약점 분석 → 맞춤 학습)
