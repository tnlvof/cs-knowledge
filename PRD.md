# PRD: 메AI플스토리 - IT 서비스 운영 CS 지식 퀴즈 RPG

> Version: 1.0
> Last Updated: 2026-02-13
> Status: Draft

---

## 1. 프로젝트 개요

### 1.1 배경

AI 시대에 바이브코딩으로 프로젝트를 빠르게 만들 수 있지만, 실제 서비스 운영에는 여전히 탄탄한 CS 지식이 필수다. 단순 암기가 아닌, 게이미피케이션을 통해 자연스럽게 CS 지식을 체화할 수 있는 퀴즈 RPG 서비스를 만든다.

### 1.2 핵심 가치

- **게임처럼 공부한다**: RPG 세계관 + 캐릭터 성장 시스템으로 학습 동기 극대화
- **주관식으로 진짜 실력**: 객관식이 아닌 주관식 답변 → AI 채점으로 진짜 이해도 측정
- **레벨 1~100**: 입문부터 CTO급까지, 체계적인 성장 경로 제공

### 1.3 타겟 사용자

- 바이브코딩으로 프로젝트는 만들 수 있지만 CS 기초가 부족한 개발자
- IT 서비스 운영 역량을 키우고 싶은 주니어~미드 레벨 개발자
- 기술 면접을 준비하는 취업/이직 준비생

---

## 2. 기술 스택

| 영역 | 기술 | 비고 |
|------|------|------|
| 프레임워크 | **Next.js 16** (App Router) | 풀스택, 최신 버전 |
| 언어 | **TypeScript** | 타입 안전성 |
| 스타일링 | **Tailwind CSS 4** + **Framer Motion** | 모바일 UI + 게임 애니메이션 |
| 데이터베이스 | **Supabase** (PostgreSQL) | Auth + DB + Storage |
| 인증 | **Supabase Auth** (Google OAuth) | Auth Proxy 최신 기능 활용 |
| AI 채점 | **Gemini 3 Flash Preview** | 주관식 답변 채점 + 피드백 |
| 배포 | **Vercel** | Next.js 최적화 배포 |
| 결제 | **토스페이먼츠** | API 비용 후원 결제 |
| 이미지 저장 | **Supabase Storage** | 몬스터/캐릭터 이미지 |

---

## 3. 핵심 기능

### 3.1 사용자 플로우 (전체)

```
첫 접속 → 캐릭터 생성 → 퀴즈(전투) → 레벨업 → 자동전직 → 반복
                ↓                                    ↑
          (로그인 없이 시작)                    (로그인 유도 → 데이터 저장)
```

### 3.2 캐릭터 시스템

#### 3.2.1 캐릭터 생성 (첫 접속)

- 첫 접속 시 **로그인 없이** 바로 캐릭터 생성 화면 진입
- 닉네임 입력 + 초기 캐릭터 외형 선택 (3~4종)
- 캐릭터 생성 완료 후 바로 첫 번째 퀴즈(전투) 시작
- 데이터는 localStorage에 임시 저장 → 로그인 시 서버 동기화

#### 3.2.2 직업 시스템 (자동전직)

CS 분야별 특화 직업으로 자동전직. 가장 많이 정답을 맞춘 분야 기준.

| 직업 | 특화 분야 | 전직 조건 | 아이콘 컨셉 |
|------|----------|----------|------------|
| 🗡️ 네트워크 기사 | 네트워크 | 네트워크 정답률 1위 | 검 + 네트워크 케이블 |
| 🛡️ 리눅스 수호자 | Linux/OS | Linux/OS 정답률 1위 | 방패 + 터미널 |
| 📖 데이터 마법사 | 데이터베이스 | DB 정답률 1위 | 지팡이 + 데이터 스크롤 |
| ⚔️ 배포 전사 | 배포/CI·CD | 배포 정답률 1위 | 쌍검 + 파이프라인 |
| 🔮 관측의 현자 | 모니터링 | 모니터링 정답률 1위 | 수정구슬 + 대시보드 |
| 🏹 보안 레인저 | 보안 | 보안 정답률 1위 | 활 + 방화벽 |
| 🧙 아키텍트 대마법사 | 아키텍처 | 아키텍처 정답률 1위 | 로브 + 설계도 |
| ⚡ 장애 사냥꾼 | 장애/SRE | SRE 정답률 1위 | 번개 + 알람 |

- 전직은 **레벨 10, 30, 50, 70, 90**에서 발생 (전직 연출 포함)
- 상위 전직은 같은 분야 내에서 더 강한 직업으로 진화
- 전직 시 화려한 애니메이션 연출

#### 3.2.3 레벨 시스템 (1~100)

| 레벨 구간 | 단계 | 퀴즈 난이도 | 몬스터 등급 |
|----------|------|-----------|-----------|
| 1~10 | 수습 모험가 | 입문 (Level 1) | 슬라임급 |
| 11~25 | 견습 기사 | 초급 (Level 1~2) | 고블린급 |
| 26~50 | 정식 모험가 | 중급 (Level 2~3) | 오크/늑대급 |
| 51~75 | 베테랑 | 고급 (Level 3) | 드래곤급 |
| 76~90 | 마스터 | 심화 (Level 3~4) | 마왕급 |
| 91~100 | 전설 | 최고급 (Level 4) | 신급 |

**경험치(EXP) 시스템:**
- 정답: +100 EXP (기본)
- 부분 정답: +30~70 EXP (AI 채점 점수 비례)
- 오답: +10 EXP (도전 보상)
- 연속 정답 보너스: 연속 3문제 정답 시 1.5배, 5문제 시 2배, 10문제 시 3배
- 레벨업에 필요한 EXP는 레벨이 올라갈수록 점진적 증가

### 3.3 퀴즈(전투) 시스템

#### 3.3.1 전투 화면 구성 (모바일 UI)

```
┌─────────────────────────┐
│  [HP바] 몬스터 이름 Lv.5 │
│                         │
│    🐉 [몬스터 이미지]     │
│       HP ████████░░      │
│                         │
│ ┌─────────────────────┐ │
│ │                     │ │
│ │   [퀴즈 문제 영역]    │ │
│ │   분야: 네트워크      │ │
│ │                     │ │
│ └─────────────────────┘ │
│                         │
│ ┌─────────────────────┐ │
│ │  [주관식 답변 입력]    │ │
│ │                     │ │
│ └─────────────────────┘ │
│                         │
│  [⚔️ 공격! (제출)]      │
│                         │
│ ─── 내 캐릭터 ──────── │
│  🗡️ Lv.3 닉네임        │
│  HP ██████████  EXP 45% │
└─────────────────────────┘
```

#### 3.3.2 전투 흐름

1. **몬스터 등장**: 레벨에 맞는 몬스터 + 퀴즈 문제 출제
2. **답변 입력**: 주관식으로 답변 작성
3. **공격(제출)**: 답변 제출 → AI 채점 시작
4. **채점 결과 연출**:
   - 정답 → 크리티컬 히트 애니메이션 → 몬스터 HP 대폭 감소
   - 부분 정답 → 일반 공격 애니메이션 → 몬스터 HP 일부 감소
   - 오답 → 미스 애니메이션 → 몬스터가 반격 (내 HP 감소)
5. **AI 해설**: 정답/오답과 관계없이 상세 해설 표시
6. **보상**: EXP 획득 + 레벨업 체크
7. **다음 문제** 또는 **전투 종료**(몬스터 처치 시)

#### 3.3.3 몬스터 시스템

- 몬스터 1마리 = 퀴즈 3~5문제 (HP 기반)
- 정답 시 몬스터 HP가 줄어들고, 오답 시 내 HP가 줄어듦
- 내 HP가 0이 되면 전투 실패 → "재도전" 또는 "다른 몬스터"
- 몬스터 처치 시 보너스 EXP + 처치 기록
- **몬스터 이미지**: 레벨 구간별 고유 몬스터 이미지 (AI 생성 → Supabase Storage 저장)

몬스터 레벨 매핑 예시:

| 레벨 구간 | 몬스터 | 이미지 컨셉 |
|----------|--------|-----------|
| 1~10 | 버그 슬라임 | 초록색 젤리 + 코드 기호 |
| 11~25 | 에러 고블린 | 빨간 고블린 + 에러 메시지 |
| 26~40 | 레거시 오크 | 갑옷 오크 + 구식 코드 |
| 41~55 | 다운타임 늑대 | 어둠 늑대 + 서버 랙 |
| 56~70 | 메모리릭 드래곤 | 보라색 드래곤 + 메모리 파편 |
| 71~85 | 데드락 마왕 | 어둠 왕 + 체인 |
| 86~100 | 카오스 엔지니어 신 | 우주적 존재 + 인프라 |

### 3.4 AI 채점 시스템

#### 3.4.1 채점 방식

- **모델**: Gemini 3 Flash Preview (`gemini-3-flash-preview`)
- **채점 기준**:
  - 핵심 키워드 포함 여부
  - 개념의 정확성
  - 답변의 완성도
- **점수 체계**: 0.0 ~ 1.0 (소수점 1자리)
  - 1.0: 완벽한 정답
  - 0.5~0.9: 부분 정답 (핵심은 맞지만 불완전)
  - 0.1~0.4: 방향은 맞지만 핵심 누락
  - 0.0: 오답 또는 무관한 답변

#### 3.4.2 AI 응답 형식

```json
{
  "score": 0.7,
  "isCorrect": "partial",
  "feedback": "TLS 암호화를 언급한 것은 좋지만, 무결성 검증과 서버 인증도 HTTPS의 핵심 보안 요소입니다.",
  "correctAnswer": "HTTPS는 TLS 암호화(기밀성), 데이터 변조 감지(무결성), 인증서 기반 서버 인증 3가지를 제공합니다.",
  "tip": "HTTPS의 3대 보안 요소: 기밀성, 무결성, 인증"
}
```

### 3.5 인증 및 데이터 저장

#### 3.5.1 인증 플로우

```
첫 접속 → 캐릭터 생성(비로그인) → 퀴즈 플레이(localStorage)
                                         │
                                    레벨 5 도달 or 수동 클릭
                                         │
                                    로그인 유도 팝업
                                    "데이터를 저장하려면
                                     Google로 로그인하세요"
                                         │
                                    Google OAuth 로그인
                                         │
                                    localStorage → Supabase 동기화
```

- **Google OAuth만** 지원 (Supabase Auth)
- **Supabase Auth Proxy** 사용하여 빠른 인증 처리
- 로그인 전 데이터는 localStorage에 보관
- 로그인 시 자동으로 서버에 동기화

#### 3.5.2 로그인 유도 시점

- 레벨 5 도달 시 "데이터를 잃지 않으려면 로그인하세요" 팝업
- 메뉴에 상시 "로그인" 버튼 노출
- 강제 로그인은 절대 하지 않음 (언제든 비로그인 플레이 가능)

### 3.6 히스토리 시스템

#### 3.6.1 기록 항목

모든 퀴즈 플레이 기록을 저장:

| 필드 | 설명 |
|------|------|
| 문제 | 출제된 퀴즈 원문 |
| 분야 | CS 분야 (네트워크, DB 등) |
| 난이도 | 문제 레벨 |
| 내 답변 | 사용자가 입력한 주관식 답변 |
| AI 채점 | 점수 + 피드백 |
| 모범 답안 | AI가 제공한 정답 해설 |
| 풀이 일시 | timestamp |
| 소요 시간 | 답변 작성에 걸린 시간 |

#### 3.6.2 히스토리 뷰

- **타임라인 뷰**: 날짜별 풀이 기록 스크롤
- **분야별 필터**: 특정 분야만 보기
- **오답 노트**: 오답/부분 정답만 모아보기 (복습 기능)
- **통계**: 분야별 정답률, 총 문제 수, 평균 점수

---

## 4. 게이미피케이션 요소

### 4.1 핵심 게이미피케이션 매커니즘

| 요소 | 구현 | 목적 |
|------|------|------|
| **레벨 시스템** | Lv.1~100 + EXP 바 | 성장 실감 |
| **직업 전직** | 분야별 자동전직 (5단계) | 정체성 + 목표 |
| **전투 UI** | 몬스터 vs 캐릭터 | 학습 = 전투 |
| **연속 정답 콤보** | 콤보 카운터 + 보너스 EXP | 집중력 유지 |
| **일일 퀘스트** | "오늘 5문제 풀기" | 매일 접속 유도 |
| **칭호 시스템** | "네트워크 마스터", "DB 천재" 등 | 수집 욕구 |
| **HP 시스템** | 오답 시 HP 감소, 0이면 실패 | 긴장감 |
| **크리티컬 히트** | 완벽한 답변 시 크리티컬 연출 | 쾌감 |
| **몬스터 도감** | 처치한 몬스터 기록 | 수집 요소 |
| **주간 리포트** | 이번 주 성장 요약 | 성취감 |

### 4.2 칭호 시스템

특정 조건 달성 시 칭호 해금:

| 칭호 | 조건 |
|------|------|
| 첫 발걸음 | 첫 퀴즈 완료 |
| 5연속 정답왕 | 연속 5문제 정답 |
| 10연속 무쌍 | 연속 10문제 정답 |
| 네트워크 입문자 | 네트워크 문제 10개 정답 |
| DB 마스터 | DB 문제 50개 정답 |
| 전분야 정복자 | 모든 분야 문제 각 10개 이상 정답 |
| 불사조 | HP 1에서 전투 승리 |
| 레벨 50 돌파 | 레벨 50 달성 |
| 전설의 시작 | 레벨 100 달성 |

### 4.3 일일 퀘스트

매일 자동 생성되는 미니 미션:

- "오늘 5문제 풀기" → 보너스 EXP 200
- "네트워크 분야 3문제 정답" → 보너스 EXP 150
- "연속 3문제 정답 달성" → 보너스 EXP 100

### 4.4 후원 & 아이템샵 시스템

#### 4.4.1 개요

AI 채점에 사용되는 Gemini API 비용을 후원받는 시스템. **과금 모델이 아닌 자발적 후원**이며,
후원자에게는 캐릭터 코스튬 아이템을 제공한다. 게임 능력치에 영향 없는 **순수 꾸미기 아이템만** 제공.

> 원칙: Pay-to-Win 절대 금지. 후원 여부와 관계없이 퀴즈/레벨업/전직 등 모든 핵심 기능은 동일.

#### 4.4.2 결제 (토스페이먼츠)

- **결제 수단**: 토스페이먼츠 (카드, 토스페이, 간편결제 등)
- **후원 단위**: "젬(Gem)" 충전 방식

| 후원 금액 | 젬 수량 | 보너스 |
|----------|--------|--------|
| 1,000원 | 100젬 | - |
| 3,000원 | 300젬 | +30젬 보너스 |
| 5,000원 | 500젬 | +75젬 보너스 |
| 10,000원 | 1,000젬 | +200젬 보너스 |

- 로그인 필수 (후원 시 Google 로그인 유도)
- 환불 정책: 미사용 젬에 한해 7일 이내 환불 가능

#### 4.4.3 아이템샵

젬으로 구매 가능한 코스튬 아이템. **캐릭터 외형만 변경, 능력치 영향 없음.**

| 카테고리 | 아이템 예시 | 가격 |
|---------|-----------|------|
| 모자 | 프로그래머 후드, 해커 비니, 서버 헬멧, 클라우드 왕관 | 50~200젬 |
| 무기 스킨 | 기계식 키보드 검, USB 지팡이, 랜선 채찍, 마우스 해머 | 100~300젬 |
| 의상 | 터미널 로브, 깃헙 망토, AWS 갑옷, 404 티셔츠 | 150~500젬 |
| 이펙트 | 정답 시 불꽃 이펙트, 레벨업 무지개 빛기둥, 골드 데미지 폰트 | 200~400젬 |
| 펫 | 미니 도커 고래, 깃 고양이, 쿠버 조타기 | 300~500젬 |
| 칭호 프레임 | 골드 닉네임 테두리, 홀로그램 칭호 배경 | 100~250젬 |

#### 4.4.4 후원자 표시

- 닉네임 옆 작은 하트 뱃지 (후원 경험 1회 이상)
- 프로필에 "서포터" 태그 표시
- 후원 누적 금액별 뱃지 색상 변경 (브론즈/실버/골드)

| 누적 후원 | 뱃지 |
|----------|------|
| 1,000원+ | 브론즈 하트 |
| 10,000원+ | 실버 하트 |
| 50,000원+ | 골드 하트 |

#### 4.4.5 후원 진입점 (UI)

- **설정 화면**: "API 비용 후원하기" 버튼 (항상 노출)
- **메인(IT 빌리지)**: 아이템샵 NPC 건물 (탭하면 샵 진입)
- **프로필 화면**: 캐릭터 옆 "꾸미기" 버튼 → 아이템샵 연결
- **후원 안내 팝업**: 레벨 10 도달 시 1회 노출 ("이 서비스는 AI API 비용으로 운영됩니다. 후원으로 서비스 유지를 도와주세요!")
- 강제성 없음, 닫기 버튼 항상 존재

---

## 5. UI/UX 설계

> **디자인 레퍼런스**: 메이플스토리의 2D 사이드뷰 RPG 감성을 차용하되, 저작권 침해를 피하기 위해
> 독자적인 아트 스타일로 재해석한다. "메이플 감성의 짭플스토리" 느낌.

### 5.1 디자인 원칙

- **Mobile-First (모바일 Only)**: PC에서도 모바일 UI로 표시 (max-width: 430px, 중앙 정렬)
- **2D 픽셀아트 + 도트 감성**: 메이플스토리풍 2D 사이드뷰, 캐릭터/몬스터는 픽셀아트 스타일
- **밝고 따뜻한 톤**: 메이플의 밝은 파스텔 + 판타지 색감 차용 (다크 테마 X)
- **둥근 UI 프레임**: 메이플스토리 특유의 둥근 모서리 윈도우 + 스크롤 장식 테두리
- **한 손 조작**: 하단 중심 인터랙션, 엄지 영역에 핵심 버튼 배치
- **과장된 이펙트**: 레벨업 빛기둥, 데미지 숫자 팝업, 전직 연출 등 화려한 애니메이션

### 5.2 메이플 감성 UI 요소 (저작권 회피 버전)

| 메이플 원본 요소 | 메AI플스토리 변형 | 차별화 포인트 |
|----------------|-----------------|-------------|
| EXP 바 (하단 노란색) | 하단 고정 EXP 바 (그라데이션 민트→골드) | 색상/형태 변경, 퍼센트 + 레벨 텍스트 |
| 캐릭터 (SD 2등신) | 3등신 픽셀 캐릭터 (직업별 의상) | 등신 비율 변경, 독자 디자인 |
| 데미지 스킨 (숫자 팝업) | 채점 점수 팝업 (+100 EXP, MISS!, CRITICAL!) | 폰트/색상 독자적, CS 용어 혼합 |
| 말풍선 (NPC 대화) | 둥근 말풍선 (AI 채점 피드백) | 꼬리 형태 변경, 코드 블록 스타일 |
| 미니맵 (우상단) | 분야 진행도 미니 차트 (우상단) | 레이더 차트 형태로 변형 |
| 인벤토리 창 | 히스토리/칭호 창 (같은 윈도우 프레임) | 나무 프레임 → 코드 에디터 프레임 |
| 퀵슬롯 (하단) | 하단 액션 바 (퀴즈 시작, 도감, 프로필) | 둥근 아이콘, 3~4개 슬롯 |
| 사냥터 배경 | 분야별 배경 (서버실, 터미널, 클라우드 등) | IT 테마 배경으로 완전 차별화 |
| 몬스터 (귀여운 SD) | IT 테마 몬스터 (버그 슬라임, 에러 고블린) | 완전 독자 디자인 |
| 레벨업 이펙트 (빛기둥) | 레벨업 빛기둥 + 코드 파티클 | 코드 조각이 흩날리는 연출 |
| 전직 퀘스트 | 자동전직 연출 (캐릭터 변신) | 분야 아이콘 회전 + 빛 폭발 |

### 5.3 화면별 상세 UI

#### 5.3.1 캐릭터 생성 화면

```
┌─────────────────────────┐
│                         │
│   ✦ 메AI플스토리 ✦      │
│   "CS 모험의 시작"       │
│                         │
│  ┌───────────────────┐  │
│  │                   │  │
│  │  [캐릭터 프리뷰]    │  │
│  │   픽셀아트 캐릭터    │  │
│  │   좌우 화살표로 선택  │  │
│  │  ◀  🧑‍💻  ▶         │  │
│  │                   │  │
│  └───────────────────┘  │
│                         │
│  닉네임: [____________]  │
│                         │
│  외형:  ① ② ③ ④        │
│         (픽셀 아바타)    │
│                         │
│  ┌───────────────────┐  │
│  │  ⚔️ 모험 시작하기!  │  │
│  └───────────────────┘  │
│                         │
│  작은 글씨: 로그인 없이   │
│  바로 시작할 수 있어요    │
└─────────────────────────┘
```

#### 5.3.2 메인 화면 (월드맵)

메이플스토리의 마을 느낌. 배경에 IT 테마 풍경 (서버실 마을, 클라우드 하늘).

```
┌─────────────────────────┐
│ [분야 차트]    [⚙설정]   │
│                         │
│  ☁️ ☁️    ☁️             │
│ ~~~IT 빌리지~~~          │
│  🏠  🏰  🏪              │
│ ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓ │
│                         │
│     🧑‍💻 Lv.12           │
│     닉네임               │
│     네트워크 기사         │
│                         │
│ ┌─────────┐┌─────────┐  │
│ │ ⚔️ 사냥  ││ 📖 도감  │  │
│ │  하러가기 ││  보기   │  │
│ └─────────┘└─────────┘  │
│ ┌─────────┐┌─────────┐  │
│ │ 📜 기록  ││ 🏆 칭호  │  │
│ │  보기   ││  보기   │  │
│ └─────────┘└─────────┘  │
│                         │
│ ═══════════════════════ │
│ Lv.12 ████████░░ 68%    │
│ EXP 680/1000            │
└─────────────────────────┘
```

#### 5.3.3 전투 화면 (퀴즈)

메이플 사냥터 느낌. 2D 사이드뷰로 캐릭터와 몬스터가 마주보는 구도.

```
┌─────────────────────────┐
│ 🌲서버실 던전 B2F   [도망]│
│                         │
│  ┌── 에러 고블린 ─────┐  │
│  │ HP ████████░░ 3/5  │  │
│  └────────────────────┘  │
│                         │
│        👾                │
│    [몬스터 픽셀아트]      │
│  ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓  │
│        🧑‍💻              │
│     [내 캐릭터]          │
│                         │
│ ╔═══════════════════════╗│
│ ║ Q. DNS 조회 과정을     ║│
│ ║ 순서대로 설명하세요.    ║│
│ ║ [네트워크] ⭐Lv.1      ║│
│ ╚═══════════════════════╝│
│                         │
│ ┌─────────────────────┐ │
│ │ 답변을 입력하세요...   │ │
│ │                     │ │
│ │                     │ │
│ └─────────────────────┘ │
│                         │
│ ┌─────────────────────┐ │
│ │    ⚔️ 공격하기!      │ │
│ └─────────────────────┘ │
│ ═══════════════════════ │
│ HP ██████████  Lv.12    │
└─────────────────────────┘
```

#### 5.3.4 채점 결과 연출

```
정답 시:                    오답 시:
┌──────────────┐           ┌──────────────┐
│              │           │              │
│  CRITICAL!   │           │    MISS!     │
│  +100 EXP    │           │   -1 ❤️      │
│  (숫자 팝업)  │           │  몬스터 반격!  │
│              │           │              │
│  ✨ 캐릭터가   │           │  💥 몬스터가   │
│  공격 모션!   │           │  공격 모션!    │
│              │           │              │
│ ┌──────────┐ │           │ ┌──────────┐ │
│ │AI 해설    │ │           │ │AI 해설    │ │
│ │정답: ...  │ │           │ │정답: ...  │ │
│ │팁: ...    │ │           │ │팁: ...    │ │
│ └──────────┘ │           │ └──────────┘ │
│              │           │              │
│ [다음 문제 ▶] │           │ [다음 문제 ▶] │
└──────────────┘           └──────────────┘
```

#### 5.3.5 레벨업 연출

메이플스토리의 레벨업 빛기둥 오마주 (독자 디자인):

- 화면 중앙에 캐릭터
- 아래에서 위로 빛기둥 솟아오름 (민트 + 골드 그라데이션)
- `{ }`, `< />`, `=>`, `SELECT *` 등 코드 파티클이 빛기둥과 함께 흩날림
- "LEVEL UP!" 텍스트 팝업 (픽셀 폰트)
- 새 레벨 숫자가 크게 표시
- 진동 피드백 (모바일)

#### 5.3.6 전직 연출

- 캐릭터가 화면 중앙에서 빛에 감싸임
- 분야 아이콘 (네트워크 케이블, DB 실린더 등)이 캐릭터 주위를 회전
- 빛 폭발 → 새로운 직업 의상의 캐릭터 등장
- "전직! [네트워크 기사]" 텍스트 + 팡파르 효과음
- 새 직업 스킬/능력 안내 팝업

### 5.4 화면 목록

| 화면 | 설명 | 로그인 필요 |
|------|------|-----------|
| 캐릭터 생성 | 닉네임 + 픽셀 아바타 선택 | X |
| 메인 (IT 빌리지) | 마을 배경 + 캐릭터 + 메뉴 버튼 | X |
| 전투 (사냥터) | 2D 사이드뷰 몬스터 전투 + 퀴즈 | X |
| 채점 결과 | 데미지 팝업 + AI 해설 | X |
| 레벨업 연출 | 빛기둥 + 코드 파티클 | X |
| 전직 연출 | 직업 변경 변신 애니메이션 | X |
| 캐릭터 프로필 | 스탯 창 (메이플 캐릭터 창 오마주) | X |
| 히스토리 | 풀이 기록 (인벤토리 창 스타일) | △ (비로그인은 현재 세션만) |
| 몬스터 도감 | 몬스터북 (도감 UI) | △ |
| 칭호 목록 | 획득/미획득 칭호 | △ |
| 설정 | 로그인/로그아웃, 알림 | X |

### 5.5 컬러 시스템

메이플스토리의 밝은 판타지 톤을 차용하되 IT 감성 추가:

```
배경: #F5F0E8 (따뜻한 아이보리 - 메이플 마을 느낌)
카드/윈도우 프레임: #FFF8ED (크림) + #8B6914 (갈색 테두리 - 나무 프레임풍)
주요 액센트: #FF6B35 (오렌지 - 공격/크리티컬)
보조 액센트: #4ECDC4 (민트 - 정답/레벨업)
EXP 바: #FFD700 → #FFA500 (골드 그라데이션)
HP 바: #FF4757 → #FF6B81 (레드 그라데이션)
MP/스태미나 바: #3742FA → #70A1FF (블루 그라데이션)
텍스트: #2C2C2C (메인) / #7C7C7C (서브)
몬스터 HP: #FF3838
퀴즈 영역 배경: #FFFDF7 (밝은 크림)
버튼: #FF6B35 (주요) / #4ECDC4 (보조)
```

### 5.6 폰트 & 아이콘

- **제목/레벨 텍스트**: 픽셀 폰트 (예: DungGeunMo, 갈무리체 등 무료 한글 픽셀 폰트)
- **본문/퀴즈**: Pretendard (가독성 우선)
- **데미지 숫자**: 굵은 픽셀 폰트 + 외곽선 (흰 테두리 + 컬러 채우기)
- **아이콘**: 픽셀아트 스타일 커스텀 아이콘 (검, 방패, 지팡이 등)

### 5.7 사운드 (선택사항, Phase 2)

- 전투 BGM (8bit 스타일)
- 정답 효과음 (찰칵 + 크리티컬 사운드)
- 오답 효과음 (미스 사운드)
- 레벨업 팡파르
- 전직 팡파르
- 기본 OFF, 설정에서 ON 가능

### 5.8 저작권 회피 가이드라인

| 항목 | 하면 안 되는 것 | 해야 하는 것 |
|------|---------------|-------------|
| 캐릭터 | 메이플 캐릭터 트레이싱/모방 | 독자적 3등신 픽셀 캐릭터 디자인 |
| 몬스터 | 주황버섯, 슬라임 등 메이플 몬스터 복제 | IT 테마 독자 몬스터 (버그, 에러 등) |
| UI 프레임 | 메이플 UI 스크린샷 사용 | 둥근 프레임 느낌만 차용, 독자 디자인 |
| 폰트 | 메이플스토리체 사용 | 무료 픽셀 폰트 사용 |
| 효과음/BGM | 메이플 원본 사운드 사용 | 프리 라이선스 8bit 사운드 |
| 맵 배경 | 메이플 맵 이미지 사용 | IT 테마 독자 배경 (서버실, 터미널 등) |
| 용어 | "메소", "스타포스" 등 메이플 고유 용어 | "EXP", "골드", "전직" 등 일반 RPG 용어 |

---

## 6. 데이터베이스 설계

### 6.1 Supabase 테이블

#### `profiles` (사용자 프로필)

| 컬럼 | 타입 | 설명 |
|------|------|------|
| id | uuid (PK) | Supabase Auth user ID |
| nickname | text | 게임 닉네임 |
| level | int | 현재 레벨 (1~100) |
| exp | int | 현재 경험치 |
| hp | int | 현재 HP |
| max_hp | int | 최대 HP |
| job_class | text | 현재 직업 |
| job_tier | int | 전직 단계 (1~5) |
| top_category | text | 최고 정답률 분야 |
| avatar_type | text | 캐릭터 외형 |
| created_at | timestamptz | 생성일 |
| updated_at | timestamptz | 수정일 |

#### `quiz_history` (퀴즈 풀이 기록)

| 컬럼 | 타입 | 설명 |
|------|------|------|
| id | uuid (PK) | |
| user_id | uuid (FK) | profiles.id |
| question_id | uuid (FK) | questions.id |
| user_answer | text | 사용자 답변 |
| ai_score | decimal | AI 채점 점수 (0.0~1.0) |
| ai_feedback | text | AI 피드백 |
| ai_correct_answer | text | AI 모범 답안 |
| is_correct | text | 'correct' / 'partial' / 'wrong' |
| exp_earned | int | 획득 EXP |
| time_spent_sec | int | 소요 시간 (초) |
| combo_count | int | 당시 콤보 수 |
| monster_id | uuid (FK) | 전투 중인 몬스터 |
| created_at | timestamptz | 풀이 일시 |

#### `questions` (문제 은행)

| 컬럼 | 타입 | 설명 |
|------|------|------|
| id | uuid (PK) | |
| category | text | 분야 (network, linux, db 등) |
| subcategory | text | 세부 주제 (DNS, TCP 등) |
| difficulty | int | 난이도 (1~4) |
| level_min | int | 최소 출제 레벨 |
| level_max | int | 최대 출제 레벨 |
| question_text | text | 문제 내용 |
| correct_answer | text | 모범 답안 |
| keywords | text[] | 채점 핵심 키워드 |
| explanation | text | 해설 |
| source_doc | text | 출처 docs 파일 |
| created_at | timestamptz | |

#### `monsters` (몬스터)

| 컬럼 | 타입 | 설명 |
|------|------|------|
| id | uuid (PK) | |
| name | text | 몬스터 이름 |
| level_min | int | 출현 최소 레벨 |
| level_max | int | 출현 최대 레벨 |
| hp | int | 기본 HP |
| image_url | text | 이미지 URL (Supabase Storage) |
| description | text | 몬스터 설명 |
| category | text | 관련 CS 분야 (nullable) |

#### `achievements` (칭호/업적)

| 컬럼 | 타입 | 설명 |
|------|------|------|
| id | uuid (PK) | |
| code | text (UNIQUE) | 칭호 코드 |
| name | text | 칭호 이름 |
| description | text | 달성 조건 설명 |
| icon | text | 아이콘/이모지 |

#### `user_achievements` (사용자 칭호)

| 컬럼 | 타입 | 설명 |
|------|------|------|
| id | uuid (PK) | |
| user_id | uuid (FK) | profiles.id |
| achievement_id | uuid (FK) | achievements.id |
| earned_at | timestamptz | 획득 일시 |

#### `daily_quests` (일일 퀘스트)

| 컬럼 | 타입 | 설명 |
|------|------|------|
| id | uuid (PK) | |
| user_id | uuid (FK) | profiles.id |
| quest_type | text | 퀘스트 종류 |
| target_count | int | 목표 수 |
| current_count | int | 현재 달성 수 |
| bonus_exp | int | 보상 EXP |
| quest_date | date | 퀘스트 날짜 |
| completed | boolean | 완료 여부 |

#### `shop_items` (아이템샵 상품)

| 컬럼 | 타입 | 설명 |
|------|------|------|
| id | uuid (PK) | |
| name | text | 아이템 이름 |
| category | text | 'hat' / 'weapon_skin' / 'costume' / 'effect' / 'pet' / 'frame' |
| description | text | 아이템 설명 |
| price_gem | int | 가격 (젬) |
| image_url | text | 아이템 이미지 URL |
| rarity | text | 'common' / 'rare' / 'epic' / 'legendary' |
| created_at | timestamptz | |

#### `user_items` (사용자 보유 아이템)

| 컬럼 | 타입 | 설명 |
|------|------|------|
| id | uuid (PK) | |
| user_id | uuid (FK) | profiles.id |
| item_id | uuid (FK) | shop_items.id |
| equipped | boolean | 장착 여부 |
| purchased_at | timestamptz | 구매 일시 |

#### `donations` (후원 내역)

| 컬럼 | 타입 | 설명 |
|------|------|------|
| id | uuid (PK) | |
| user_id | uuid (FK) | profiles.id |
| amount | int | 결제 금액 (원) |
| gem_amount | int | 지급된 젬 수량 (보너스 포함) |
| payment_key | text | 토스페이먼츠 paymentKey |
| order_id | text (UNIQUE) | 주문 ID |
| status | text | 'pending' / 'confirmed' / 'cancelled' / 'refunded' |
| created_at | timestamptz | |

#### `battle_sessions` (전투 세션)

| 컬럼 | 타입 | 설명 |
|------|------|------|
| id | uuid (PK) | |
| user_id | uuid (FK) | profiles.id |
| monster_id | uuid (FK) | monsters.id |
| monster_hp | int | 남은 몬스터 HP |
| user_hp | int | 남은 유저 HP |
| status | text | 'active' / 'victory' / 'defeat' |
| questions_answered | int | 답변한 문제 수 |
| created_at | timestamptz | |
| completed_at | timestamptz | |

### 6.2 RLS (Row Level Security)

모든 테이블에 RLS 적용:
- `profiles`: 본인 데이터만 읽기/쓰기
- `quiz_history`: 본인 기록만 읽기/쓰기
- `questions`: 모든 인증 사용자 읽기 가능
- `monsters`: 모든 사용자 읽기 가능 (public)
- `achievements`: 모든 사용자 읽기 가능 (public)
- `user_achievements`: 본인 데이터만 읽기/쓰기
- `daily_quests`: 본인 데이터만 읽기/쓰기
- `battle_sessions`: 본인 데이터만 읽기/쓰기

---

## 7. API 설계 (Next.js Route Handlers)

### 7.1 인증

| Method | Endpoint | 설명 |
|--------|----------|------|
| POST | `/api/auth/callback` | Google OAuth 콜백 |
| POST | `/api/auth/sync` | localStorage → 서버 동기화 |

### 7.2 게임

| Method | Endpoint | 설명 |
|--------|----------|------|
| POST | `/api/game/create-character` | 캐릭터 생성 |
| GET | `/api/game/profile` | 프로필 조회 |
| PATCH | `/api/game/profile` | 프로필 업데이트 |

### 7.3 전투

| Method | Endpoint | 설명 |
|--------|----------|------|
| POST | `/api/battle/start` | 전투 시작 (몬스터 + 문제 배정) |
| POST | `/api/battle/answer` | 답변 제출 → AI 채점 → 결과 반환 |
| POST | `/api/battle/end` | 전투 종료 처리 |

### 7.4 히스토리

| Method | Endpoint | 설명 |
|--------|----------|------|
| GET | `/api/history` | 풀이 기록 조회 (필터, 페이지네이션) |
| GET | `/api/history/stats` | 분야별 통계 |
| GET | `/api/history/wrong-notes` | 오답 노트 |

### 7.5 퀘스트/업적

| Method | Endpoint | 설명 |
|--------|----------|------|
| GET | `/api/quests/daily` | 오늘의 일일 퀘스트 |
| GET | `/api/achievements` | 업적 목록 + 달성 여부 |

---

## 8. 문제 은행 구축 계획

### 8.1 현재 보유 분야 (docs/ 기반)

| # | 분야 | 파일 | 난이도 범위 |
|---|------|------|-----------|
| 1 | 네트워크 | `01-network.md` | Level 1~4 |
| 2 | Linux/OS | `02-linux-os.md` | Level 1~4 |
| 3 | 데이터베이스 | `03-database.md` | Level 1~4 |
| 4 | 배포/CI·CD | `04-deployment-cicd.md` | Level 1~4 |
| 5 | 모니터링 | `05-monitoring-observability.md` | Level 1~4 |
| 6 | 보안 | `06-security.md` | Level 1~4 |
| 7 | 아키텍처 | `07-architecture-scalability.md` | Level 1~4 |
| 8 | 장애/SRE | `08-incident-sre.md` | Level 1~4 |

### 8.2 문제 생성 전략

- docs의 레벨별 지식을 기반으로 문제 자동 생성 (AI 활용)
- 분야당 최소 50문제 (총 400문제+) 초기 구축
- 난이도 4단계를 게임 레벨 1~100에 매핑
- 지속적으로 추가 분야 및 문제 확장 예정

### 8.3 추후 추가 예정 분야

- 클라우드 (AWS/GCP/Azure)
- 컨테이너 (Docker/Kubernetes)
- 메시지 큐 (Kafka, RabbitMQ)
- 캐싱 (Redis, Memcached)
- API 설계 (REST, GraphQL, gRPC)
- Git/형상관리

---

## 9. 프로젝트 구조

```
cs-knowledge/
├── docs/                     # CS 지식 원본 문서
│   ├── 01-network.md
│   ├── ...
│   └── quiz-record.md
├── src/
│   ├── app/                  # Next.js App Router
│   │   ├── layout.tsx        # 모바일 레이아웃
│   │   ├── page.tsx          # 캐릭터 생성 / 메인 분기
│   │   ├── world/            # 월드맵 (메인)
│   │   ├── battle/           # 전투 화면
│   │   ├── result/           # 전투 결과
│   │   ├── profile/          # 캐릭터 프로필
│   │   ├── history/          # 히스토리
│   │   ├── achievements/     # 칭호/업적
│   │   ├── bestiary/         # 몬스터 도감
│   │   └── api/              # Route Handlers
│   │       ├── auth/
│   │       ├── game/
│   │       ├── battle/
│   │       ├── history/
│   │       └── quests/
│   ├── components/           # 공통 컴포넌트
│   │   ├── ui/               # 기본 UI (버튼, 카드 등)
│   │   ├── game/             # 게임 UI (HP바, EXP바 등)
│   │   ├── battle/           # 전투 컴포넌트
│   │   └── animations/       # 애니메이션 컴포넌트
│   ├── lib/                  # 유틸리티
│   │   ├── supabase/         # Supabase 클라이언트
│   │   ├── gemini/           # Gemini AI 채점
│   │   ├── game-logic/       # 게임 로직 (EXP, 레벨업, 전직)
│   │   └── storage/          # localStorage 관리
│   ├── hooks/                # Custom hooks
│   ├── types/                # TypeScript 타입
│   └── constants/            # 상수 (레벨 테이블, 직업 등)
├── public/
│   └── images/               # 정적 이미지
├── supabase/
│   ├── migrations/           # DB 마이그레이션
│   └── seed.sql              # 초기 데이터
├── PRD.md                    # 이 문서
├── next.config.ts
├── tailwind.config.ts
├── package.json
└── tsconfig.json
```

---

## 10. MVP 범위 (Phase 1)

### 포함

- [x] 캐릭터 생성 (닉네임 + 외형)
- [x] 레벨 시스템 (1~100) + EXP
- [x] 전투 UI (몬스터 vs 캐릭터)
- [x] 주관식 퀴즈 + Gemini AI 채점
- [x] 몬스터 시스템 (레벨별)
- [x] HP 시스템
- [x] 연속 정답 콤보
- [x] 기본 직업 전직 (1~2단계)
- [x] Google 로그인 (Supabase Auth)
- [x] 비로그인 플레이 (localStorage)
- [x] 풀이 히스토리
- [x] 오답 노트
- [x] 분야별 통계
- [x] 문제 은행 초기 구축 (8분야 × 50문제)

### 미포함 (Phase 2+)

- [ ] 일일 퀘스트
- [ ] 칭호/업적 시스템
- [ ] 몬스터 도감
- [ ] 주간 리포트
- [ ] 추가 CS 분야
- [ ] 소셜 기능 (랭킹, 친구)
- [ ] PWA (오프라인 지원)
- [ ] 푸시 알림

---

## 11. 성공 지표

| 지표 | 목표 |
|------|------|
| 일일 퀴즈 풀이 수 | 유저당 평균 10문제 이상 |
| 재방문율 | 7일 재방문 30% 이상 |
| 평균 세션 시간 | 10분 이상 |
| 레벨 10 도달률 | 첫 접속 유저 중 50% 이상 |
| Google 로그인 전환율 | 레벨 5 도달 유저 중 40% 이상 |

---

## 12. 향후 확장 계획

1. **Phase 2**: 일일 퀘스트 + 칭호 시스템 + 몬스터 도감
2. **Phase 3**: 소셜 기능 (랭킹 보드, 길드)
3. **Phase 4**: 멀티플레이 (실시간 퀴즈 대전)
4. **Phase 5**: AI 기반 맞춤 문제 출제 (약점 분석 → 맞춤 학습)
